"use strict";(self.webpackChunkbrads_boilerplate_theme=self.webpackChunkbrads_boilerplate_theme||[]).push([[483],{3720:(e,t,a)=>{a.d(t,{A:()=>s}),a(1609);const s="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9Im1kaTpjYWxlbmRhciI+CjxwYXRoIGlkPSJWZWN0b3IiIGQ9Ik0xNS44MzMzIDE1LjgzM0g0LjE2NjY3VjYuNjY2MzRIMTUuODMzM00xMy4zMzMzIDAuODMzMDA4VjIuNDk5NjdINi42NjY2N1YwLjgzMzAwOEg1VjIuNDk5NjdINC4xNjY2N0MzLjI0MTY3IDIuNDk5NjcgMi41IDMuMjQxMzQgMi41IDQuMTY2MzRWMTUuODMzQzIuNSAxNi4yNzUgMi42NzU1OSAxNi42OTkgMi45ODgxNiAxNy4wMTE1QzMuMzAwNzIgMTcuMzI0MSAzLjcyNDY0IDE3LjQ5OTcgNC4xNjY2NyAxNy40OTk3SDE1LjgzMzNDMTYuMjc1NCAxNy40OTk3IDE2LjY5OTMgMTcuMzI0MSAxNy4wMTE4IDE3LjAxMTVDMTcuMzI0NCAxNi42OTkgMTcuNSAxNi4yNzUgMTcuNSAxNS44MzNWNC4xNjYzNEMxNy41IDMuNzI0MzEgMTcuMzI0NCAzLjMwMDM5IDE3LjAxMTggMi45ODc4M0MxNi42OTkzIDIuNjc1MjcgMTYuMjc1NCAyLjQ5OTY3IDE1LjgzMzMgMi40OTk2N0gxNVYwLjgzMzAwOE0xNC4xNjY3IDkuOTk5NjdIMTBWMTQuMTY2M0gxNC4xNjY3VjkuOTk5NjdaIiBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIwLjgiLz4KPC9nPgo8L3N2Zz4K"},2440:(e,t,a)=>{a.d(t,{A7:()=>i,FN:()=>c,Wk:()=>m});var s=a(1609),n=a.n(s),l=a(6674);const r=n().createContext(null);function c({opts:e,className:t,children:a}){const[n,c]=(0,l.A)({dragFree:!0,containScroll:"trimSnaps",slidesToScroll:1,align:"start",breakpoints:{"(min-width: 1024px)":{slidesToShow:3.5},"(min-width: 768px)":{slidesToShow:2.5},"(max-width: 767px)":{slidesToShow:2.5}},...e});return(0,s.createElement)(r.Provider,{value:{emblaRef:n,emblaApi:c}},(0,s.createElement)("div",{ref:n,className:`overflow-hidden ${t||""}`},a))}function m({className:e,children:t}){return(0,s.createElement)("div",{className:`flex -ml-4 ${e||""}`},t)}function i({className:e,children:t}){return(0,s.createElement)("div",{className:`pl-4 relative w-full shrink-0 \n      basis-[40%]        /* შეცვლილი 85%-დან 40%-მდე მობილურისთვის */\n      md:basis-[45%] \n      lg:basis-[30%] \n      ${e||""}`},t)}},2280:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(1609),n=a(4976),l=a(8027);const r=({endDate:e,texts:t})=>{const[a,n]=(0,s.useState)(0),[l,r]=(0,s.useState)(0),[c,m]=(0,s.useState)(0),[i,o]=(0,s.useState)(0),[u,d]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const t=()=>{const t=(new Date).getTime(),a=new Date(e).getTime()-t;a<0?d(!0):(n(Math.floor(a/864e5)),r(Math.floor(a%864e5/36e5)),m(Math.floor(a%36e5/6e4)),o(Math.floor(a%6e4/1e3)))};t();const a=setInterval(t,1e3);return()=>clearInterval(a)}),[e]),u?(0,s.createElement)("p",{className:"text-lg font-bold mb-4"},t.auctionEnded):(0,s.createElement)("div",{className:"w-full flex justify-center items-center gap-2 text-center"},(0,s.createElement)("span",{className:"w-1/4 flex flex-col p-2 rounded-xl",style:{backgroundColor:"#e6e6e6"}},(0,s.createElement)("span",{className:"text-lg font-bold"},a),(0,s.createElement)("span",{className:"text-sm"},t.days)),(0,s.createElement)("span",{className:"w-1/4 flex flex-col p-2 rounded-xl",style:{backgroundColor:"#e6e6e6"}},(0,s.createElement)("span",{className:"text-lg font-bold"},l),(0,s.createElement)("span",{className:"text-sm"},t.hours)),(0,s.createElement)("span",{className:"w-1/4 flex flex-col p-2 rounded-xl",style:{backgroundColor:"#e6e6e6"}},(0,s.createElement)("span",{className:"text-lg font-bold"},c),(0,s.createElement)("span",{className:"text-sm"},t.minutes)),(0,s.createElement)("span",{className:"w-1/4 flex flex-col p-2 rounded-xl",style:{backgroundColor:"#e6e6e6"}},(0,s.createElement)("span",{className:"text-lg font-bold"},i),(0,s.createElement)("span",{className:"text-sm"},t.seconds)))},c=({auction:e,texts:t,wishlist:a,onWishlistToggle:c,getFeaturedImageUrl:m,handleImageError:i})=>{const o=e=>`/auction/${e}`;return(0,s.createElement)("div",{className:"bg-white rounded-2xl p-3 sm:p-4 shadow-lg flex flex-col justify-between"},(0,s.createElement)(n.N_,{to:o(e.id),className:"flex flex-col gap-3 sm:gap-4"},(0,s.createElement)("div",{className:"relative h-[140px] sm:h-[160px] md:h-[180px]"},(0,s.createElement)("img",{src:m(e),alt:e.title.rendered,className:"w-full h-full object-cover rounded-xl z-0",onError:i}),(0,s.createElement)("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-full text-white text-xs sm:text-sm",style:(e=>{const t=Date.now(),a=new Date(e.meta.start_time).getTime(),s=new Date(e.meta.due_time).getTime();return a>t?{backgroundColor:"#FF5733"}:s>t?{backgroundColor:"#19B200"}:{backgroundColor:"#848484"}})(e)},(e=>{const t=Date.now(),a=new Date(e.meta.start_time).getTime(),s=new Date(e.meta.due_time).getTime();return a>t?"იწყება":s>t?"აქტიური":"დასრულებული"})(e))),(0,s.createElement)("div",{className:"flex justify-between gap-3 sm:gap-6 items-center"},(0,s.createElement)("h4",{className:"text-base sm:text-lg font-bold line-clamp-2",dangerouslySetInnerHTML:{__html:e.title.rendered}}),(0,s.createElement)("button",{onClick:t=>c(t,e.id),className:"focus:outline-none transition-transform duration-200 hover:scale-110 flex-shrink-0"},a.includes(Number(e.id))?(0,s.createElement)(l.Mbv,{className:"w-5 h-5 sm:w-6 sm:h-6 text-black"}):(0,s.createElement)(l.sOK,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-500 hover:text-black"}))),(0,s.createElement)("div",{className:"flex justify-between gap-3 sm:gap-6 items-center"},(0,s.createElement)("div",{className:"w-1/2 flex flex-col items-start"},(0,s.createElement)("h5",{className:"text-black font-normal text-sm sm:text-base md:text-lg"},t.ticketPrice),(0,s.createElement)("span",{className:"text-black font-normal text-sm sm:text-base md:text-lg"},e.meta.ticket_price," ",t.currency)),(0,s.createElement)("div",{className:"w-1/2 flex flex-col items-start"},(0,s.createElement)("h5",{className:"text-black font-normal text-sm sm:text-base md:text-lg"},t.currentPrice),(0,s.createElement)("span",{className:"text-black font-normal text-sm sm:text-base md:text-lg",style:{color:"#00AEEF"}},e.meta.auction_price," ",t.currency))),(0,s.createElement)("div",{className:"flex flex-col items-center my-2 sm:my-4"},new Date(e.meta.start_time).getTime()>Date.now()?(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",{className:"text-base sm:text-lg font-bold mb-2 sm:mb-4"},t.auctionWillStart),(0,s.createElement)(r,{endDate:e.meta.start_time,texts:t})):new Date(e.meta.due_time).getTime()>Date.now()?(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",{className:"text-base sm:text-lg font-bold mb-2 sm:mb-4"},t.auctionWillEnd),(0,s.createElement)(r,{endDate:e.meta.due_time,texts:t})):(0,s.createElement)("p",{className:"text-base sm:text-lg font-bold mb-2 sm:mb-4"},t.auctionEnded)),(0,s.createElement)("div",{className:"flex flex-col gap-2 sm:gap-3 mt-2 sm:mt-4"},(0,s.createElement)(n.N_,{to:o(e.id),className:"w-full py-2 sm:py-3 text-white text-center text-sm sm:text-base rounded-full",style:{backgroundColor:"#00AEEF"}},t.placeBid),(0,s.createElement)(n.N_,{to:o(e.id),className:"w-full py-2 sm:py-3 text-center text-sm sm:text-base rounded-full",style:{backgroundColor:"#E6E6E6"}},t.buyNow," ",e.meta.buy_now,t.currency))))}},2483:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var s=a(1609),n=a.n(s),l=a(7767);const r=function({mediaId:e}){const[t,a]=(0,s.useState)(null),[n,l]=(0,s.useState)(!0),[r,c]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async()=>{if(e)try{const t=await fetch(`/wp-json/wp/v2/media/${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();a(s.source_url),l(!1)}catch(e){console.error("Error fetching image:",e),c(e.message),l(!1)}else l(!1)})()}),[e]),n?(0,s.createElement)("div",{className:"w-full h-36 sm:h-48 bg-gray-200 animate-pulse rounded-lg"}):r?(0,s.createElement)("div",{className:"text-red-500 text-center text-sm sm:text-base"},"სურათის ჩატვირთვა ვერ მოხერხდა"):t?(0,s.createElement)("div",null,(0,s.createElement)("img",{src:t,alt:"აუქციონის სურათი",className:"w-full mx-auto rounded-lg shadow-lg max-h-48 sm:max-h-72 object-cover",loading:"lazy"})):null},c=({authorName:e,city:t,startTime:a})=>(0,s.createElement)("div",{className:"flex flex-row justify-between sm:justify-between items-center gap-3 sm:gap-6 overflow-x-auto"},(0,s.createElement)("div",{className:"flex items-center gap-2 shrink-0"},(0,s.createElement)("div",{className:"w-7 sm:w-10 h-7 sm:h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-medium text-sm sm:text-base"},e?e.charAt(0).toUpperCase():"?"),(0,s.createElement)("span",{className:"font-medium text-xs sm:text-base text-gray-800 whitespace-nowrap"},e||"უცნობი")),(0,s.createElement)("div",{className:"h-5 w-px bg-gray-200 shrink-0"}),(0,s.createElement)("div",{className:"flex items-center gap-2 text-gray-600 shrink-0"},(0,s.createElement)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"},(0,s.createElement)("path",{d:"M12 0C7.802 0 4 3.403 4 7.602C4 11.8 7.469 16.812 12 24C16.531 16.812 20 11.8 20 7.602C20 3.403 16.199 0 12 0ZM12 11C10.343 11 9 9.657 9 8C9 6.343 10.343 5 12 5C13.657 5 15 6.343 15 8C15 9.657 13.657 11 12 11Z"})),(0,s.createElement)("span",{className:"text-xs sm:text-base whitespace-nowrap"},t||"ქალაქი არ არის")),(0,s.createElement)("div",{className:"h-5 w-px bg-gray-200 shrink-0"}),(0,s.createElement)("div",{className:"flex items-center gap-2 text-gray-600 shrink-0"},(0,s.createElement)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,s.createElement)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,s.createElement)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,s.createElement)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,s.createElement)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})),(0,s.createElement)("span",{className:"text-xs sm:text-base whitespace-nowrap"},(e=>{if(!e)return"თარიღი არ არის მითითებული";const t=new Date(e),a=e=>e.toString().padStart(2,"0");return`${a(t.getDate())}/${a(t.getMonth()+1)}/${t.getFullYear()}`})(a)))),m=({auction:e})=>{const[t,a]=(0,s.useState)(e.meta?.auction_price),[n,l]=(0,s.useState)(!1),[r,c]=(0,s.useState)(new Date),m=(0,s.useRef)(e.meta?.auction_price);(0,s.useEffect)((()=>{const t=setInterval((async()=>{try{const t=await fetch(`/wp-json/bidspace/v1/auction/${e.id}/current-price`);if(!t.ok)return;const s=await t.json();s.price!==m.current&&(a(s.price),l(!0),m.current=s.price,setTimeout((()=>{l(!1)}),500))}catch(e){console.error("ფასის შემოწმების შეცდომა:",e)}}),2e3),s=setInterval((()=>{c(new Date)}),1e3);return()=>{clearInterval(t),clearInterval(s)}}),[e.id]);const i=(()=>{const t=new Date(r.toLocaleString("en-US",{timeZone:"Asia/Tbilisi"})),a=new Date(e.meta?.start_time);return console.log("თბილისის დრო:",t),console.log("აუქციონის დაწყების დრო:",a),console.log("აუქციონის start_time:",e.meta?.start_time),t>=a})();return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("style",null,"\n          @keyframes pulse {\n            0% { transform: scale(1); }\n            50% { transform: scale(1.05); }\n            100% { transform: scale(1); }\n          }\n          .pulse-animation {\n            animation: pulse 0.5s ease-in-out;\n          }\n        "),(0,s.createElement)("div",{className:"flex flex-wrap sm:flex-row gap-2 sm:gap-4 justify-between"},(0,s.createElement)("div",{className:"w-full flex justify-between sm:hidden"},(0,s.createElement)("div",{className:"flex flex-col items-start gap-0.5 shrink-0 w-[120px]"},(0,s.createElement)("span",{className:"text-[12px] font-bold whitespace-nowrap"},"ბილეთის ფასი"),(0,s.createElement)("span",{className:"text-[14px] font-normal whitespace-nowrap"},e.meta?.ticket_price,"₾")),(0,s.createElement)("div",{className:"flex flex-col items-start gap-0.5 shrink-0 w-[120px]"},(0,s.createElement)("span",{className:"text-[12px] font-bold whitespace-nowrap"},"მიმდინარე ფასი"),(0,s.createElement)("span",{className:"text-[14px] font-normal whitespace-nowrap "+(n?"pulse-animation":""),style:{color:"#00AEEF"}},t,"₾"))),(0,s.createElement)("div",{className:"hidden sm:flex flex-col items-start gap-2 shrink-0 w-[120px] md:w-auto"},(0,s.createElement)("span",{className:"text-[10px] md:text-lg font-bold whitespace-nowrap"},"ბილეთის ფასი"),(0,s.createElement)("span",{className:"text-[12px] md:text-lg font-normal whitespace-nowrap"},e.meta?.ticket_price,"₾")),(0,s.createElement)("div",{className:"hidden sm:flex flex-col items-start gap-2 shrink-0 w-[120px] md:w-auto"},(0,s.createElement)("span",{className:"text-[10px] md:text-lg font-bold whitespace-nowrap"},"მიმდინარე ფასი"),(0,s.createElement)("span",{className:"text-[12px] md:text-lg font-normal whitespace-nowrap "+(n?"pulse-animation":""),style:{color:"#00AEEF"}},t,"₾")),(0,s.createElement)("div",{className:"w-full sm:w-[120px] flex flex-col items-start gap-0.5 sm:gap-2 shrink-0 md:w-auto"},(0,s.createElement)("span",{className:"text-[12px] sm:text-sm md:text-lg font-bold whitespace-nowrap"},"მომენტალურად ყიდვა"),i?(0,s.createElement)("span",{className:"text-[14px] sm:text-sm md:text-lg font-normal whitespace-nowrap",style:{color:"#FF0000"}},"არ აქვს"):(0,s.createElement)("span",{className:"text-[14px] sm:text-sm md:text-lg font-normal whitespace-nowrap",style:{color:"#00AEEF"}},e.meta?.buy_now,"₾"))))},i=({targetDate:e,buyNowPrice:t})=>{console.log("BeforeStartTimer received props:",{targetDate:e,buyNowPrice:t});const[a,n]=(0,s.useState)({days:0,hours:0,minutes:0,seconds:0});(0,s.useEffect)((()=>{const t=()=>{const t=Date.parse((new Date).toLocaleString("en-US",{timeZone:"Asia/Tbilisi"})),a=Date.parse(new Date(e).toLocaleString("en-US",{timeZone:"Asia/Tbilisi"}))-t;if(a>0){const e=Math.floor(a/864e5),t=Math.floor(a%864e5/36e5),s=Math.floor(a%36e5/6e4),l=Math.floor(a%6e4/1e3);n({days:e,hours:t,minutes:s,seconds:l})}else n({days:0,hours:0,minutes:0,seconds:0})};t();const a=setInterval(t,1e3);return()=>clearInterval(a)}),[e]);const l=e=>String(e).padStart(2,"0"),r=t?`მომენტალურად ყიდვა ${t}₾`:"მომენტალურად ყიდვა";return(0,s.createElement)("div",{className:"space-y-3 sm:space-y-4"},(0,s.createElement)("div",{className:"w-full flex gap-2 sm:gap-4 justify-center text-center"},(0,s.createElement)("div",{className:"w-1/4 bg-blue-100 p-2 sm:p-3 rounded-lg min-w-[60px] sm:min-w-[80px]"},(0,s.createElement)("div",{className:"text-lg sm:text-2xl font-bold"},l(a.days)),(0,s.createElement)("div",{className:"text-xs sm:text-sm"},"დღე")),(0,s.createElement)("div",{className:"w-1/4 bg-blue-100 p-2 sm:p-3 rounded-lg min-w-[60px] sm:min-w-[80px]"},(0,s.createElement)("div",{className:"text-lg sm:text-2xl font-bold"},l(a.hours)),(0,s.createElement)("div",{className:"text-xs sm:text-sm"},"საათი")),(0,s.createElement)("div",{className:"w-1/4 bg-blue-100 p-2 sm:p-3 rounded-lg min-w-[60px] sm:min-w-[80px]"},(0,s.createElement)("div",{className:"text-lg sm:text-2xl font-bold"},l(a.minutes)),(0,s.createElement)("div",{className:"text-xs sm:text-sm"},"წუთი")),(0,s.createElement)("div",{className:"w-1/4 bg-blue-100 p-2 sm:p-3 rounded-lg min-w-[60px] sm:min-w-[80px]"},(0,s.createElement)("div",{className:"text-lg sm:text-2xl font-bold"},l(a.seconds)),(0,s.createElement)("div",{className:"text-xs sm:text-sm"},"წამი"))),(0,s.createElement)("button",{className:"w-full py-2 sm:py-3 bg-[#00AEEF] text-white rounded-full text-base sm:text-lg transition-colors",onClick:()=>alert("ეს ფუნქცია ჯერ არ არის აქტიური")},r))},o=({endDate:e})=>{const[t,a]=(0,s.useState)({days:0,hours:0,minutes:0,seconds:0}),[n,l]=(0,s.useState)(e),r=(0,s.useRef)(null);(0,s.useEffect)((()=>{l(e)}),[e]),(0,s.useEffect)((()=>{const e=e=>{e.detail?.newTime&&l(e.detail.newTime)};return document.addEventListener("auctionTimeUpdated",e),()=>document.removeEventListener("auctionTimeUpdated",e)}),[]);const c=()=>{const e=Date.parse((new Date).toLocaleString("en-US",{timeZone:"Asia/Tbilisi"})),t=Date.parse(new Date(n).toLocaleString("en-US",{timeZone:"Asia/Tbilisi"}))-e;if(t>0){const e=Math.floor(t/864e5),s=Math.floor(t%864e5/36e5),n=Math.floor(t%36e5/6e4),l=Math.floor(t%6e4/1e3);a({days:e,hours:s,minutes:n,seconds:l}),t/1e3<=30&&document.dispatchEvent(new CustomEvent("auctionLastMinutes",{detail:{secondsLeft:Math.floor(t/1e3)}}))}else a({days:0,hours:0,minutes:0,seconds:0})};(0,s.useEffect)((()=>(c(),r.current=setInterval(c,1e3),()=>{r.current&&clearInterval(r.current)})),[n]);const m=e=>String(e).padStart(2,"0");return(0,s.createElement)("div",{className:"w-full flex gap-2 sm:gap-4 justify-center text-center overflow-x-auto"},(0,s.createElement)("div",{className:"w-[50px] sm:w-[60px] md:w-1/4 bg-blue-100 p-1.5 sm:p-2 md:p-3 rounded-lg shrink-0"},(0,s.createElement)("div",{className:"text-base sm:text-lg md:text-2xl font-bold"},m(t.days)),(0,s.createElement)("div",{className:"text-[10px] sm:text-xs md:text-sm"},"დღ")),(0,s.createElement)("div",{className:"w-[50px] sm:w-[60px] md:w-1/4 bg-blue-100 p-1.5 sm:p-2 md:p-3 rounded-lg shrink-0"},(0,s.createElement)("div",{className:"text-base sm:text-lg md:text-2xl font-bold"},m(t.hours)),(0,s.createElement)("div",{className:"text-[10px] sm:text-xs md:text-sm"},"სთ")),(0,s.createElement)("div",{className:"w-[50px] sm:w-[60px] md:w-1/4 bg-blue-100 p-1.5 sm:p-2 md:p-3 rounded-lg shrink-0"},(0,s.createElement)("div",{className:"text-base sm:text-lg md:text-2xl font-bold"},m(t.minutes)),(0,s.createElement)("div",{className:"text-[10px] sm:text-xs md:text-sm"},"წთ")),(0,s.createElement)("div",{className:"w-[50px] sm:w-[60px] md:w-1/4 bg-blue-100 p-1.5 sm:p-2 md:p-3 rounded-lg shrink-0"},(0,s.createElement)("div",{className:"text-base sm:text-lg md:text-2xl font-bold"},m(t.seconds)),(0,s.createElement)("div",{className:"text-[10px] sm:text-xs md:text-sm"},"წმ")))},u=({auction:e,currentUserId:t,onBidPlaced:a,onTimeExtended:n})=>{const[l,r]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),[u,d]=(0,s.useState)(null),[M,N]=(0,s.useState)(Number(e?.meta?.auction_price)||0),g=Number(e?.meta?.min_bid_price)||0,x=e?.meta?.due_time,p=Number(e?.author)||Number(e?.author_id)||Number(e?.post_author)||0;(0,s.useEffect)((()=>{const e=()=>{if(!x)return null;const e=(new Date).getTime(),t=new Date(x).getTime()-e;return Math.max(0,Math.floor(t/1e3))};d(e());const t=setInterval((()=>{d(e())}),500);return()=>clearInterval(t)}),[x]),(0,s.useEffect)((()=>{const t=setInterval((async()=>{try{const t=await fetch(`/wp-json/bidspace/v1/auction/${e.id}/current-price`);if(t.ok){const e=await t.json();e.price&&e.price!==M&&N(Number(e.price))}}catch(e){console.error("Error fetching current price:",e)}}),500);return()=>clearInterval(t)}),[e.id,M]);const w=Boolean(t)&&t!==p,E=M+g;return(0,s.createElement)("div",{className:"flex flex-col gap-4"},(0,s.createElement)("form",{onSubmit:s=>{s&&s.preventDefault(),m(""),(async s=>{if(!t)return void m("გთხოვთ გაიაროთ ავტორიზაცია");if(t===p)return void m("თქვენ არ შეგიძლიათ საკუთარ აუქციონზე ბიდის დადება");const l=(e=>{const t=Number(e),a=M+g;return isNaN(t)?"გთხოვთ შეიყვანოთ ვალიდური რიცხვი":t<a?`ბიდი უნდა იყოს მინიმუმ ${a} ₾`:null})(s);if(l)m(l);else{o(!0);try{const l=await fetch(`/wp-json/bidspace/v1/auction/${e.id}/bid`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bidspaceSettings?.restNonce||""},body:JSON.stringify({bid_price:Number(s),user_id:t})});if(!l.ok){const e=await l.json();throw new Error(e.message||"ბიდის განთავსება ვერ მოხერხდა")}const c=await l.json();c.was_extended&&n?.(c.due_time),r(""),N(Number(c.current_price)),"function"==typeof a&&a(c);const m=new CustomEvent("auctionUpdated",{detail:{currentPrice:Number(c.current_price),wasExtended:c.was_extended,dueTime:c.due_time}});document.dispatchEvent(m)}catch(e){m(e.message||"ბიდის განთავსება ვერ მოხერხდა")}finally{o(!1)}}})(l)},className:"flex flex-col gap-2"},(0,s.createElement)("div",{className:"flex flex-col sm:flex-row gap-2"},(0,s.createElement)("button",{type:"button",onClick:()=>{m(""),r((M+g).toString())},className:"w-full sm:w-[10%] bg-[#00adef] text-white rounded-full text-base sm:text-lg h-10 sm:h-11 hover:bg-[#80d6f7] transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",disabled:i||!w,title:"სწრაფი ბიდი"},"+",g,"₾"),(0,s.createElement)("input",{type:"number",value:l,onChange:e=>r(e.target.value),min:E,placeholder:`მინ. ${E} ₾`,className:"w-full sm:w-[50%] p-3 sm:p-4 border rounded-full text-center text-base sm:text-lg h-10 sm:h-11",disabled:i||!w}),(0,s.createElement)("button",{type:"submit",className:"w-full sm:w-[40%] bg-[#00AEEF] text-white rounded-full text-base sm:text-lg h-10 sm:h-11 hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!l||Number(l)<E||i||!w},i?"იტვირთება...":"განათავსე ბიდი")),null!==u&&u<=30&&(0,s.createElement)("p",{className:"text-orange-500 text-sm text-center"},"დარჩენილია ",u," წამი! ბიდის დადების შემთხვევაში დრო გაგრძელდება 30 წამით"),c&&(0,s.createElement)("p",{className:"text-red-500 text-sm text-center"},c),!t&&(0,s.createElement)("p",{className:"text-gray-500 text-sm text-center"},"ბიდის დასადებად გთხოვთ გაიაროთ ავტორიზაცია"),t&&t===p&&(0,s.createElement)("p",{className:"text-gray-500 text-sm text-center"},"თქვენ არ შეგიძლიათ საკუთარ აუქციონზე ბიდის დადება")))};var d=a(3720);const M=({auctionData:e})=>{const t=e?.meta?.bids_list?(Array.isArray(e.meta.bids_list)?e.meta.bids_list:Object.values(e.meta.bids_list)).sort(((e,t)=>{const a=new Date(e.bid_time);return new Date(t.bid_time)-a}))[0]:null;return(0,s.createElement)("div",{className:"w-full flex flex-col py-4 sm:py-6 gap-4 sm:gap-6"},(0,s.createElement)("div",{className:"flex justify-center items-center gap-3 sm:gap-6 px-2 sm:px-0"},(0,s.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjEiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MSA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9IndldWk6ZG9uZTItZmlsbGVkIj4KPHBhdGggaWQ9IlZlY3RvciIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zMC41IDU1QzE2LjY5MjUgNTUgNS41IDQzLjgwNzUgNS41IDMwQzUuNSAxNi4xOTI1IDE2LjY5MjUgNSAzMC41IDVDNDQuMzA3NSA1IDU1LjUgMTYuMTkyNSA1NS41IDMwQzU1LjUgNDMuODA3NSA0NC4zMDc1IDU1IDMwLjUgNTVaTTI3LjU1NzUgMzUuMzVMMjAuNjQ1IDI4LjQzMjVMMTggMzEuMDc3NUwyNS43OTc1IDM4Ljg4QzI2LjI2NjMgMzkuMzQ4NyAyNi45MDIxIDM5LjYxMiAyNy41NjUgMzkuNjEyQzI4LjIyNzkgMzkuNjEyIDI4Ljg2MzcgMzkuMzQ4NyAyOS4zMzI1IDM4Ljg4TDQ0LjIxMjUgMjQuMDA1TDQxLjU1NzUgMjEuMzVMMjcuNTU3NSAzNS4zNVoiIGZpbGw9IiMwMEFFRUYiLz4KPC9nPgo8L3N2Zz4K",alt:"Auction ended icon",className:"w-8 h-8 sm:w-auto sm:h-auto"}),(0,s.createElement)("span",{className:"font-normal text-sm sm:text-lg"},"გილოცავთ!")),(0,s.createElement)("div",{className:"w-full border-y p-3 sm:p-4 flex flex-col items-center gap-4 sm:gap-6"},(0,s.createElement)("span",{className:"w-full font-bold text-sm sm:text-lg px-2 sm:px-0"},e?.title?.rendered||"აუქციონის სახელი"),(0,s.createElement)("div",{className:"w-full flex flex-row overflow-x-auto gap-3 sm:gap-0 sm:justify-between items-center px-2 sm:px-0"},(0,s.createElement)("div",{className:"flex items-center gap-1 sm:gap-2 shrink-0"},(0,s.createElement)("img",{src:d.A,alt:"Date icon",className:"w-4 h-4 sm:w-auto sm:h-auto"}),(0,s.createElement)("span",{className:"text-[10px] sm:text-base whitespace-nowrap"},t?(e=>{const t=new Date(e);return`${t.toLocaleString("ka-GE",{year:"numeric",month:"numeric",day:"numeric"})}, ${t.toLocaleString("ka-GE",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}`})(t.bid_time).split(",")[0]:"თარიღი არ არის")),(0,s.createElement)("div",{className:"flex items-center gap-1 sm:gap-2 shrink-0"},(0,s.createElement)("span",{className:"font-bold text-[10px] sm:text-base whitespace-nowrap"},"ავტორი: "),(0,s.createElement)("span",{className:"text-[10px] sm:text-base whitespace-nowrap"},t?.author_name||"უცნობი")),(0,s.createElement)("div",{className:"flex items-center gap-1 sm:gap-2 shrink-0"},(0,s.createElement)("span",{className:"font-bold text-[10px] sm:text-base whitespace-nowrap"},"ფასი: "),(0,s.createElement)("span",{className:"text-[10px] sm:text-base whitespace-nowrap"},t?`${t.bid_price}₾`:"0₾")),(0,s.createElement)("div",{className:"flex items-center gap-1 sm:gap-2 shrink-0"},(0,s.createElement)("button",{className:"flex items-center gap-1 sm:gap-2"},(0,s.createElement)("span",{className:"font-bold text-[10px] sm:text-base text-[#00a9eb] whitespace-nowrap"},"გადახდა"),(0,s.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9ImljOnJvdW5kLW5hdmlnYXRlLW5leHQiPgo8cGF0aCBpZD0iVmVjdG9yIiBkPSJNOS4zMDgwNyA2LjcxMDAyQzkuMjE1MzcgNi44MDI1NCA5LjE0MTgyIDYuOTEyNDIgOS4wOTE2NCA3LjAzMzRDOS4wNDE0NiA3LjE1NDM3IDkuMDE1NjIgNy4yODQwNSA5LjAxNTYyIDcuNDE1MDJDOS4wMTU2MiA3LjU0NTk5IDkuMDQxNDYgNy42NzU2NyA5LjA5MTY0IDcuNzk2NjVDOS4xNDE4MiA3LjkxNzYyIDkuMjE1MzcgOC4wMjc1MSA5LjMwODA3IDguMTIwMDJMMTMuMTg4MSAxMkw5LjMwODA3IDE1Ljg4QzkuMTIxMDkgMTYuMDY3IDkuMDE2MDUgMTYuMzIwNiA5LjAxNjA1IDE2LjU4NUM5LjAxNjA1IDE2Ljg0OTQgOS4xMjEwOSAxNy4xMDMgOS4zMDgwNyAxNy4yOUM5LjQ5NTA1IDE3LjQ3NyA5Ljc0ODY0IDE3LjU4MiAxMC4wMTMxIDE3LjU4MkMxMC4yNzc1IDE3LjU4MiAxMC41MzExIDE3LjQ3NyAxMC43MTgxIDE3LjI5TDE1LjMwODEgMTIuN0MxNS40MDA4IDEyLjYwNzUgMTUuNDc0MyAxMi40OTc2IDE1LjUyNDUgMTIuMzc2NkMxNS41NzQ3IDEyLjI1NTcgMTUuNjAwNSAxMi4xMjYgMTUuNjAwNSAxMS45OTVDMTUuNjAwNSAxMS44NjQxIDE1LjU3NDcgMTEuNzM0NCAxNS41MjQ1IDExLjYxMzRDMTUuNDc0MyAxMS40OTI0IDE1LjQwMDggMTEuMzgyNSAxNS4zMDgxIDExLjI5TDEwLjcxODEgNi43MDAwMkMxMC4zMzgxIDYuMzIwMDIgOS42OTgwNyA2LjMyMDAyIDkuMzA4MDcgNi43MTAwMloiIGZpbGw9IiMwMEFFRUYiLz4KPC9nPgo8L3N2Zz4K",alt:"payment icon",className:"w-3 h-3 sm:w-4 sm:h-4"}))))))},N=({auctionData:e})=>{const t=e?.meta?.bids_list?(Array.isArray(e.meta.bids_list)?e.meta.bids_list:Object.values(e.meta.bids_list)).sort(((e,t)=>{const a=new Date(e.bid_time);return new Date(t.bid_time)-a}))[0]:null;return(0,s.createElement)("div",{className:"w-full flex flex-col py-4 sm:py-6 gap-4 sm:gap-6"},(0,s.createElement)("div",{className:"flex justify-center items-center gap-3 sm:gap-6 px-2 sm:px-0"},(0,s.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MSA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjUuNSIgY3k9IjI1IiByPSIyNSIgZmlsbD0iI0ZGMDEwMSIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMzk0XzQ4MykiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjk1NDkgMTMuMjczN0MyNC41Mzk0IDEyLjkyOTcgMjYuMTgyMSAxMi45MTA3IDI3Ljc3NDggMTMuMjE4QzI5LjM2NzUgMTMuNTI1NCAzMC44NzQxIDE0LjE1MiAzMi4xOTUyIDE1LjA1NjhDMzMuNTE2MyAxNS45NjE1IDM0LjYyMiAxNy4xMjM3IDM1LjQzOTQgMTguNDY2OUMzNi4yNTY4IDE5LjgxIDM2Ljc2NzQgMjEuMzAzNiAzNi45Mzc1IDIyLjg0OTJDMzYuOTY3NCAyMy4xMjEzIDM2Ljg4MzEgMjMuMzkzNSAzNi43MDMyIDIzLjYwNjFDMzYuNTIzMiAyMy44MTg3IDM2LjI2MjQgMjMuOTU0MyAzNS45Nzc5IDIzLjk4MjlDMzUuNjkzNSAyNC4wMTE1IDM1LjQwODkgMjMuOTMwOSAzNS4xODY2IDIzLjc1ODhDMzQuOTY0MyAyMy41ODY3IDM0LjgyMjYgMjMuMzM3MSAzNC43OTI3IDIzLjA2NTFDMzQuNjA3OSAyMS4zODU3IDMzLjkyOTUgMTkuNzkwNyAzMi44MzYgMTguNDY1QzMxLjc0MjYgMTcuMTM5MiAzMC4yNzg4IDE2LjEzNjkgMjguNjE0MyAxNS41NzQxQzI2Ljk0OTggMTUuMDExMyAyNS4xNTI3IDE0LjkxMTEgMjMuNDMxMSAxNS4yODVDMjEuNzA5NSAxNS42NTkgMjAuMTMzOSAxNi40OTE4IDE4Ljg4NjggMTcuNjg3QzE3LjYzOTcgMTguODgyMyAxNi43NzIxIDIwLjM5MSAxNi4zODQ1IDIyLjAzODVDMTUuOTk2OSAyMy42ODYgMTYuMTA1MiAyNS40MDQ4IDE2LjY5NjkgMjYuOTk1OEMxNy4yODg1IDI4LjU4NjggMTguMzM5MyAyOS45ODQ5IDE5LjcyNzQgMzEuMDI4M0MyMS4xMTU2IDMyLjA3MTYgMjIuNzg0NCAzMi43MTc0IDI0LjU0MDUgMzIuODkwOEMyNC42ODIzIDMyLjkwMzUgMjQuODIwMiAzMi45NDI5IDI0Ljk0NiAzMy4wMDY4QzI1LjA3MTggMzMuMDcwNyAyNS4xODMyIDMzLjE1NzkgMjUuMjczNiAzMy4yNjMyQzI1LjM2NCAzMy4zNjg1IDI1LjQzMTcgMzMuNDg5OSAyNS40NzI4IDMzLjYyMDRDMjUuNTEzOCAzMy43NTEgMjUuNTI3NCAzMy44ODc5IDI1LjUxMjggMzQuMDIzNUMyNS40OTgyIDM0LjE1OTEgMjUuNDU1NiAzNC4yOTA1IDI1LjM4NzUgMzQuNDEwMkMyNS4zMTk1IDM0LjUzIDI1LjIyNzMgMzQuNjM1NiAyNS4xMTYzIDM0LjcyMTFDMjUuMDA1MyAzNC44MDY1IDI0Ljg3NzcgMzQuODcgMjQuNzQwOCAzNC45MDhDMjQuNjA0IDM0Ljk0NiAyNC40NjA3IDM0Ljk1NzcgMjQuMzE5MSAzNC45NDIzQzIxLjYwNjQgMzQuNjc1NCAxOS4wODEyIDMzLjQ5NSAxNy4xOTQxIDMxLjYxMTlDMTUuMzA3MSAyOS43Mjg5IDE0LjE4MSAyNy4yNjU3IDE0LjAxNjkgMjQuNjYyQzEzLjg1MjkgMjIuMDU4MyAxNC42NjE0IDE5LjQ4MzUgMTYuMjk4MyAxNy4zOTcyQzE3LjkzNTIgMTUuMzExIDIwLjI5NCAxMy44NDkxIDIyLjk1MzUgMTMuMjcyM0wyMi45NTQ5IDEzLjI3MzdaTTI1LjUwMDcgMTcuMTI1MUMyNS43ODY3IDE3LjEyNTEgMjYuMDYwOSAxNy4yMzM3IDI2LjI2MzEgMTcuNDI3MUMyNi40NjUzIDE3LjYyMDUgMjYuNTc4OCAxNy44ODI4IDI2LjU3ODggMTguMTU2M1YyNS4zNzUxSDIwLjgyODhDMjAuNTQyOSAyNS4zNzUxIDIwLjI2ODcgMjUuMjY2NCAyMC4wNjY1IDI1LjA3M0MxOS44NjQzIDI0Ljg3OTYgMTkuNzUwNyAyNC42MTczIDE5Ljc1MDcgMjQuMzQzOEMxOS43NTA3IDI0LjA3MDMgMTkuODY0MyAyMy44MDggMjAuMDY2NSAyMy42MTQ2QzIwLjI2ODcgMjMuNDIxMiAyMC41NDI5IDIzLjMxMjYgMjAuODI4OCAyMy4zMTI2SDI0LjQyMjZWMTguMTU2M0MyNC40MjI2IDE3Ljg4MjggMjQuNTM2MiAxNy42MjA1IDI0LjczODQgMTcuNDI3MUMyNC45NDA2IDE3LjIzMzcgMjUuMjE0OCAxNy4xMjUxIDI1LjUwMDcgMTcuMTI1MVpNMjguNjkyIDI3LjA1MjZDMjguODk0MSAyNi44NTk1IDI5LjE2ODEgMjYuNzUxIDI5LjQ1MzggMjYuNzUxQzI5LjczOTUgMjYuNzUxIDMwLjAxMzYgMjYuODU5NSAzMC4yMTU3IDI3LjA1MjZMMzIuNjg4MiAyOS40MTc2TDM1LjE2MDcgMjcuMDUyNkMzNS4yNTk0IDI2Ljk1MTMgMzUuMzc4NCAyNi44NyAzNS41MTA3IDI2LjgxMzZDMzUuNjQyOSAyNi43NTczIDM1Ljc4NTcgMjYuNzI3IDM1LjkzMDUgMjYuNzI0NUMzNi4wNzUyIDI2LjcyMjEgMzYuMjE5IDI2Ljc0NzUgMzYuMzUzMyAyNi43OTk0QzM2LjQ4NzUgMjYuODUxMyAzNi42MDk1IDI2LjkyODUgMzYuNzExOCAyNy4wMjY0QzM2LjgxNDIgMjcuMTI0MyAzNi44OTQ5IDI3LjI0MSAzNi45NDkxIDI3LjM2OTRDMzcuMDAzNCAyNy40OTc4IDM3LjAzIDI3LjYzNTMgMzcuMDI3NCAyNy43NzM4QzM3LjAyNDkgMjcuOTEyMyAzNi45OTMyIDI4LjA0ODggMzYuOTM0MyAyOC4xNzUzQzM2Ljg3NTQgMjguMzAxOCAzNi43OTA0IDI4LjQxNTcgMzYuNjg0NSAyOC41MTAxTDM0LjIxMiAzMC44NzUxTDM2LjY4NDUgMzMuMjQwMUMzNi43OTA0IDMzLjMzNDUgMzYuODc1NCAzMy40NDgzIDM2LjkzNDMgMzMuNTc0OEMzNi45OTMyIDMzLjcwMTMgMzcuMDI0OSAzMy44Mzc5IDM3LjAyNzQgMzMuOTc2NEMzNy4wMyAzNC4xMTQ4IDM3LjAwMzQgMzQuMjUyNCAzNi45NDkxIDM0LjM4MDhDMzYuODk0OSAzNC41MDkyIDM2LjgxNDIgMzQuNjI1OCAzNi43MTE4IDM0LjcyMzhDMzYuNjA5NSAzNC44MjE3IDM2LjQ4NzUgMzQuODk4OSAzNi4zNTMzIDM0Ljk1MDdDMzYuMjE5IDM1LjAwMjYgMzYuMDc1MiAzNS4wMjgxIDM1LjkzMDUgMzUuMDI1NkMzNS43ODU3IDM1LjAyMzIgMzUuNjQyOSAzNC45OTI5IDM1LjUxMDcgMzQuOTM2NUMzNS4zNzg0IDM0Ljg4MDIgMzUuMjU5NCAzNC43OTg5IDM1LjE2MDcgMzQuNjk3NkwzMi42ODgyIDMyLjMzMjZMMzAuMjE1NyAzNC42OTc2QzMwLjExNyAzNC43OTg5IDI5Ljk5OCAzNC44ODAyIDI5Ljg2NTcgMzQuOTM2NUMyOS43MzM1IDM0Ljk5MjkgMjkuNTkwNyAzNS4wMjMyIDI5LjQ0NiAzNS4wMjU2QzI5LjMwMTIgMzUuMDI4MSAyOS4xNTc0IDM1LjAwMjYgMjkuMDIzMiAzNC45NTA3QzI4Ljg4ODkgMzQuODk4OSAyOC43NjcgMzQuODIxNyAyOC42NjQ2IDM0LjcyMzhDMjguNTYyMiAzNC42MjU4IDI4LjQ4MTUgMzQuNTA5MiAyOC40MjczIDM0LjM4MDhDMjguMzczMSAzNC4yNTI0IDI4LjM0NjQgMzQuMTE0OCAyOC4zNDkgMzMuOTc2NEMyOC4zNTE1IDMzLjgzNzkgMjguMzgzMiAzMy43MDEzIDI4LjQ0MjIgMzMuNTc0OEMyOC41MDExIDMzLjQ0ODMgMjguNTg2IDMzLjMzNDUgMjguNjkyIDMzLjI0MDFMMzEuMTY0NSAzMC44NzUxTDI4LjY5MiAyOC41MTAxQzI4LjQ5MDEgMjguMzE2NyAyOC4zNzY3IDI4LjA1NDYgMjguMzc2NyAyNy43ODEzQzI4LjM3NjcgMjcuNTA4IDI4LjQ5MDEgMjcuMjQ1OSAyOC42OTIgMjcuMDUyNloiIGZpbGw9IndoaXRlIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMzk0XzQ4MyI+CjxyZWN0IHdpZHRoPSIyMyIgaGVpZ2h0PSIyMiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0IDEzKSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=",alt:"Auction ended icon",className:"w-8 h-8 sm:w-auto sm:h-auto"}),(0,s.createElement)("span",{className:"font-normal text-base sm:text-lg text-[#FF0101]"},"აუქციონი დასრულდა!")),(0,s.createElement)("div",{className:"w-full border-y p-3 sm:p-6 flex flex-col items-center gap-4 sm:gap-6"},(0,s.createElement)("span",{className:"w-full sm:w-11/12 font-bold text-base sm:text-lg px-2 sm:px-0"},e?.title?.rendered||"აუქციონის სახელი"),(0,s.createElement)("div",{className:"w-full sm:w-11/12 grid grid-cols-2 sm:flex sm:flex-row gap-3 sm:gap-0 sm:justify-between items-start sm:items-center px-2 sm:px-0"},(0,s.createElement)("div",{className:"col-span-2 sm:col-span-1 sm:w-1/3 flex items-center gap-2"},(0,s.createElement)("img",{src:d.A,alt:"Date icon",className:"w-4 h-4 sm:w-auto sm:h-auto"}),(0,s.createElement)("span",{className:"text-sm sm:text-base"},t?(e=>{const t=new Date(e);return`${t.toLocaleString("ka-GE",{year:"numeric",month:"numeric",day:"numeric"})}, ${t.toLocaleString("ka-GE",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}`})(t.bid_time):"თარიღი არ არის")),(0,s.createElement)("div",{className:"sm:w-1/3 flex items-center gap-2"},(0,s.createElement)("span",{className:"font-bold text-sm sm:text-base"},"ბიდის ავტორი: "),(0,s.createElement)("span",{className:"text-sm sm:text-base"},t?.author_name||"უცნობი")),(0,s.createElement)("div",{className:"sm:w-1/3 flex items-center gap-2"},(0,s.createElement)("span",{className:"font-bold text-sm sm:text-base"},"ბიდის ფასი: "),(0,s.createElement)("span",{className:"text-sm sm:text-base"},t?`${t.bid_price} ₾`:"0 ₾")))))},g=({auction:e,currentUserId:t})=>{if((0,s.useEffect)((()=>{e?.id&&(async()=>{try{(await fetch(`/wp-json/wp/v2/auction/${e.id}/notify-winner`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bidspaceSettings?.restNonce,"X-API-Key":window.wpApiSettings?.apiKey||""}})).ok||console.error("Failed to send winner notification")}catch(e){console.error("Error sending winner notification:",e)}})()}),[e?.id]),!e)return(0,s.createElement)("div",{className:"text-center py-4"},"აუქციონის მონაცემები არ მოიძებნა");const a=e?.meta?.bids_list?(Array.isArray(e.meta.bids_list)?e.meta.bids_list:Object.values(e.meta.bids_list)).sort(((e,t)=>{const a=new Date(e.bid_time);return new Date(t.bid_time)-a}))[0]:null;return a&&Number(a.bid_author)===Number(t)?(0,s.createElement)(M,{auctionData:e}):(0,s.createElement)(N,{auctionData:e})},x=({auction:e,startTime:t,dueTime:a,currentUserId:n,onBidPlaced:l})=>{const[r,c]=(0,s.useState)(a);(0,s.useEffect)((()=>{c(a)}),[a]),(0,s.useEffect)((()=>{const e=e=>{e.detail?.newTime&&c(e.detail.newTime)};return document.addEventListener("auctionTimeUpdated",e),()=>document.removeEventListener("auctionTimeUpdated",e)}),[]);const m=new Date,d=t?new Date(t):null,M=r?new Date(r):null;if(!d||!M||isNaN(d.getTime())||isNaN(M.getTime()))return(0,s.createElement)("div",{className:"p-4 rounded-lg bg-yellow-50 border border-yellow-200"},(0,s.createElement)("p",{className:"text-yellow-700"},"აუქციონის დრო არასწორადაა მითითებული"));const N=m.getTime(),x=d.getTime(),p=M.getTime(),w=N>=x&&N<p,E=N>=p;if(N<x){const t=e?.meta?.buy_now;return(0,s.createElement)("div",{className:"p-4 rounded-lg"},(0,s.createElement)("h3",{className:"text-lg font-semibold text-center mb-4"},"აუქციონის დაწყებამდე დარჩენილია"),(0,s.createElement)(i,{targetDate:d.toISOString(),buyNowPrice:t}))}return w?(0,s.createElement)("div",{className:"p-4 rounded-lg flex flex-col gap-4"},(0,s.createElement)("h3",{className:"text-lg font-semibold text-center mb-4"},"აუქციონის დასრულებამდე დარჩენილია"),(0,s.createElement)(o,{endDate:M.toISOString()}),(0,s.createElement)(u,{auction:{...e,meta:{...e.meta,due_time:M.toISOString()}},currentUserId:n,onBidPlaced:e=>{e.due_time&&c(e.due_time),"function"==typeof l&&l(e)}})):E?(0,s.createElement)(g,{auction:e,currentUserId:n}):null},p=()=>(0,s.createElement)("div",{className:"animate-pulse"},(0,s.createElement)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0"},(0,s.createElement)("div",{className:"flex flex-col gap-2"},(0,s.createElement)("div",{className:"h-4 w-24 bg-gray-200 rounded"}),(0,s.createElement)("div",{className:"h-3 w-32 bg-gray-200 rounded"})),(0,s.createElement)("div",{className:"flex flex-col items-end gap-2"},(0,s.createElement)("div",{className:"h-4 w-16 bg-gray-200 rounded"}),(0,s.createElement)("div",{className:"h-3 w-12 bg-gray-200 rounded"})))),w=({bids:e})=>{const[t,a]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),r=(0,s.useRef)();return(0,s.useEffect)((()=>{(async()=>{if(!Array.isArray(e))return console.error("Bids is not an array:",e),void l(!1);(!r.current||Math.abs(r.current.length-e.length)>1)&&l(!0);try{const t=await Promise.all(e.map((async e=>{if(!e.author_name&&e.bid_author)try{const t=await fetch(`/wp-json/wp/v2/users/${e.bid_author}`);if(t.ok){const a=await t.json();return{...e,author_name:a.name}}}catch(e){console.error("Error fetching user data:",e)}return e})));a(t)}catch(t){console.error("Error enriching bids:",t),a(e)}finally{l(!1)}})(),r.current=e}),[e]),n&&!r.current?(0,s.createElement)("div",{className:"h-[250px] sm:max-h-60 overflow-y-auto"},[1,2,3].map((e=>(0,s.createElement)(p,{key:e})))):Array.isArray(e)?0===e.length?(0,s.createElement)("div",{className:"h-[250px] sm:max-h-60 overflow-y-auto flex items-center justify-center"},(0,s.createElement)("p",{className:"text-center text-gray-500"},"ბიდები ჯერ არ არის")):(0,s.createElement)("div",{className:"h-[250px] sm:max-h-60 overflow-y-auto"},(n?r.current:t).map(((e,t)=>(0,s.createElement)("div",{key:`${e.bid_time}-${t}`,className:"flex justify-between items-start sm:items-center py-2 border-b last:border-b-0"},(0,s.createElement)("div",{className:"flex flex-col"},(0,s.createElement)("span",{className:"font-medium text-sm sm:text-base"},e.author_name||e.bid_author||"Unknown"),(0,s.createElement)("span",{className:"text-xs sm:text-sm text-gray-500"},new Date(e.bid_time).toLocaleString("ka-GE",{timeZone:"Asia/Tbilisi",hour:"2-digit",minute:"2-digit",second:"2-digit",year:"numeric",month:"2-digit",day:"2-digit"}))),(0,s.createElement)("div",{className:"flex flex-col items-end"},(0,s.createElement)("span",{className:"font-bold text-sm sm:text-base"},e.bid_price," ₾"),(0,s.createElement)("span",{className:"text-xs sm:text-sm text-green-600"},"+",e.price_increase," ₾")))))):(0,s.createElement)("div",{className:"h-[250px] sm:max-h-60 overflow-y-auto flex items-center justify-center"},(0,s.createElement)("p",{className:"text-center text-gray-500"},"ბიდების მონაცემები არასწორ ფორმატშია"))},E=({comments:e={},currentUserName:t,onSubmitComment:a})=>{const[l,r]=(0,s.useState)(""),[c,m]=(0,s.useState)(!1),[i,o]=(0,s.useState)(null),[u,d]=(0,s.useState)(e);n().useEffect((()=>{d(e)}),[e]);const M=Object.values(u).sort(((e,t)=>new Date(t.comment_date)-new Date(e.comment_date)));return(0,s.createElement)("div",{className:"p-4 sm:p-6 lg:p-10 bg-white rounded-2xl"},(0,s.createElement)("h2",{className:"font-bold text-base sm:text-lg"},"კომენტარები"),(0,s.createElement)("div",{className:"flex flex-col gap-6 sm:gap-8 mt-4 sm:mt-6"},(0,s.createElement)("div",{className:"p-3 sm:p-4 bg-gray-100 rounded-xl"},(0,s.createElement)("form",{onSubmit:async s=>{if(s.preventDefault(),l.trim()){m(!0),o(null);try{if(!window.bidspaceSettings?.userId)return void o("გთხოვთ გაიაროთ ავტორიზაცია");if(!window.bidspaceSettings?.restNonce)return void o("ავტორიზაციის ტოკენი არ არის ვალიდური. გთხოვთ განაახლოთ გვერდი");const e={comment_author:window.bidspaceSettings.userId,comment_author_name:t,comment_date:(new Date).toISOString(),comment_area:l.trim()};d((t=>({...t,[`temp-${Date.now()}`]:e}))),r(""),await a(l)}catch(t){console.error("Comment submission error:",t),d(e),t.message.includes("not authenticated")||t.message.includes("გაიაროთ ავტორიზაცია")?o("გთხოვთ გაიაროთ ავტორიზაცია"):t.message.includes("token")?o("ავტორიზაციის ტოკენი არ არის ვალიდური. გთხოვთ განაახლოთ გვერდი"):o("კომენტარის დამატება ვერ მოხერხდა. გთხოვთ სცადოთ თავიდან")}finally{m(!1)}}},className:"flex flex-col justify-between gap-3"},(0,s.createElement)("span",{className:"text-sm sm:text-base m-0"},t),(0,s.createElement)("textarea",{value:l,onChange:e=>r(e.target.value),className:"w-full p-2 sm:p-3 border rounded-xl text-sm sm:text-base",rows:"3",placeholder:"დაწერეთ კომენტარი...",disabled:c}),i&&(0,s.createElement)("div",{className:"text-red-500 text-xs sm:text-sm"},i),(0,s.createElement)("div",{className:"flex gap-4 sm:gap-6 items-center"},(0,s.createElement)("button",{type:"submit",disabled:c||!l.trim(),className:"text-center px-3 sm:px-4 py-2 sm:py-3 bg-[#00AEEF] text-xs sm:text-sm text-white rounded-xl "+(c||!l.trim()?"opacity-50 cursor-not-allowed":"")},c?"იგზავნება...":"დაამატე კომენტარი"),l.trim().length>0&&!c&&(0,s.createElement)("button",{type:"button",onClick:()=>r(""),className:"text-center text-xs sm:text-sm"},"გაუქმება")))),(0,s.createElement)("hr",null),M.length>0?(0,s.createElement)("div",{className:"mb-4 overflow-y-auto max-h-[300px]"},M.map(((e,t)=>(0,s.createElement)("div",{key:t,className:"hover:bg-gray-100 hover:rounded-xl hover:m-2 hover:mt-0 hover:ml-0 hover:p-1 hover:pl-3 cursor-pointer"},(0,s.createElement)("div",{className:"flex gap-2 justify-start items-center my-4"},(0,s.createElement)("span",{className:"font-bold text-sm"},e.comment_author_name),(0,s.createElement)("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),(0,s.createElement)("p",{className:"text-sm text-gray-600"},(e=>{const t=new Date,a=new Date(e),s=t-a,n=Math.floor(s/1e3),l=Math.floor(n/60),r=Math.floor(l/60),c=Math.floor(r/24);if(n<60)return"ახლახანს";if(l<60)return`${l} წუთის წინ`;if(r<24)return`${r} საათის წინ`;if(c<7)return`${c} დღის წინ`;{const e={year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("ka-GE",e)}})(e.comment_date))),(0,s.createElement)("p",null,e.comment_area))))):(0,s.createElement)("div",{className:"mb-4"},(0,s.createElement)("p",null,"ჯერ არ არის კომენტარები."))))};var y=a(6317);const j=e=>{const{updateAuction:t,updateBidsList:a}=(0,y.d)(),n=(0,s.useRef)(null),l=(0,s.useRef)({}),r=async()=>{try{const s=await fetch(`/wp-json/bidspace/v1/auction/${e}`);if(!s.ok)throw new Error("Network response was not ok");const n=await s.json();if(t(e,n),n.meta?.bids_list){const t=await(async e=>{if(!e)return[];const t=Array.isArray(e)?e:Object.entries(e).map((([e,t])=>({...t,key:e})));return(await Promise.all(t.map((async e=>{const t=await(async e=>{if(l.current[e])return l.current[e];try{const t=await fetch(`/wp-json/bidspace/v1/auction/user/${e}`);if(!t.ok)throw new Error("Failed to fetch user data");const a=(await t.json()).display_name||"Unknown";return l.current[e]=a,a}catch(t){return console.error(`Error fetching user ${e} data:`,t),"Unknown"}})(e.bid_author);return{...e,bid_price:Number(e.bid_price),price_increase:Number(e.price_increase),bid_author:Number(e.bid_author)||e.bid_author,author_name:t}})))).sort(((e,t)=>new Date(t.bid_time)-new Date(e.bid_time)))})(n.meta.bids_list);a(e,t)}}catch(e){console.error("Error fetching auction data:",e)}};(0,s.useEffect)((()=>(r(),n.current=setInterval(r,2e3),()=>{n.current&&clearInterval(n.current)})),[e])};var D=a(2440),I=a(2280);const b=()=>(0,s.createElement)("div",{className:"bg-white rounded-2xl p-4 shadow-lg flex flex-col justify-between animate-pulse"},(0,s.createElement)("div",{className:"relative h-[180px] bg-gray-200 rounded-xl"},(0,s.createElement)("div",{className:"absolute top-2 left-2 w-16 h-6 bg-gray-300 rounded-full"})),(0,s.createElement)("div",{className:"flex justify-between gap-6 items-center mt-4"},(0,s.createElement)("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),(0,s.createElement)("div",{className:"h-6 w-6 bg-gray-200 rounded-full"})),(0,s.createElement)("div",{className:"flex justify-between gap-6 items-center mt-4"},(0,s.createElement)("div",{className:"w-1/2"},(0,s.createElement)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,s.createElement)("div",{className:"h-6 bg-gray-200 rounded w-2/3"})),(0,s.createElement)("div",{className:"w-1/2"},(0,s.createElement)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,s.createElement)("div",{className:"h-6 bg-gray-200 rounded w-2/3"}))),(0,s.createElement)("div",{className:"flex flex-col items-center my-4"},(0,s.createElement)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),(0,s.createElement)("div",{className:"w-full flex justify-center items-center gap-2"},[...Array(4)].map(((e,t)=>(0,s.createElement)("div",{key:t,className:"w-1/4 flex flex-col p-2 rounded-xl bg-gray-100"},(0,s.createElement)("div",{className:"h-6 bg-gray-200 rounded w-full mb-1"}),(0,s.createElement)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mx-auto"})))))),(0,s.createElement)("div",{className:"flex flex-col gap-3 mt-4"},(0,s.createElement)("div",{className:"h-12 bg-gray-200 rounded-full"}),(0,s.createElement)("div",{className:"h-12 bg-gray-200 rounded-full"}))),f=({currentAuctionId:e=""})=>{const[t,a]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),[r,c]=(0,s.useState)(null),m={relatedAuctionsTitle:"მსგავსი აუქციონები",loading:"იტვირთება...",imageLoading:"გამოსახულება იტვირთება...",ticketPrice:"ბილეთის ფასი",currentPrice:"მიმდინარე ფასი",currency:"₾",auctionWillStart:"აუქციონი დაიწყება",auctionWillEnd:"აუქციონი დასრულდება",auctionEnded:"აუქციონი დასრულდა",days:"დღე",hours:"საათი",minutes:"წუთი",seconds:"წამი",noRelatedAuctions:"მსგავსი აუქციონები ვერ მოიძებნა",placeBid:"განათავსე ბიდი",buyNow:"ახლავე ყიდვა"};(0,s.useEffect)((()=>{e&&(async()=>{try{const t=`/wp-json/wp/v2/auction?_embed&per_page=12&exclude=${e}&orderby=date&order=desc`;console.log("Fetching from:",t);const s=await fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json","X-API-Key":window.wpApiSettings?.apiKey||""}});if(console.log("Response status:",s.status),!s.ok)throw new Error("Failed to fetch related auctions");const n=await s.json();console.log("Fetched data:",n),a(n),l(!1)}catch(e){console.error("Error fetching related auctions:",e),c("მსგავსი აუქციონების ჩატვირთვისას მოხდა შეცდომა"),l(!1)}})()}),[e]);const i=e=>{try{return e._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"/placeholder.jpg"}catch(e){return"/placeholder.jpg"}},o=e=>{e.target.src="/placeholder.jpg"};return n?(0,s.createElement)("div",{className:"w-full bg-[#E6E6E6] p-3 sm:p-5 rounded-2xl"},(0,s.createElement)("h3",{className:"text-lg sm:text-xl font-bold mb-4 sm:mb-6 text-center"},m.relatedAuctionsTitle),(0,s.createElement)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"},[...Array(12)].map(((e,t)=>(0,s.createElement)(b,{key:t}))))):r?(0,s.createElement)("div",{className:"w-full bg-[#E6E6E6] p-5 rounded-2xl"},(0,s.createElement)("p",{className:"text-red-500"},r)):t.length?(0,s.createElement)("div",{className:"w-full bg-[#E6E6E6] p-3 sm:p-5 rounded-2xl"},(0,s.createElement)("h3",{className:"text-lg sm:text-xl font-bold mb-4 sm:mb-6 text-center"},m.relatedAuctionsTitle),(0,s.createElement)(D.FN,{className:"w-full",opts:{dragFree:!0,containScroll:"trimSnaps",slidesToScroll:1,align:"start",breakpoints:{"(min-width: 1024px)":{slidesToShow:3.5},"(min-width: 768px)":{slidesToShow:2.5},"(max-width: 767px)":{slidesToShow:1.5}}}},(0,s.createElement)(D.Wk,null,t.map((e=>(0,s.createElement)(D.A7,{key:e.id,className:"basis-[85%] md:basis-[45%] lg:basis-[30%]"},(0,s.createElement)(I.A,{auction:e,texts:m,wishlist:[],onWishlistToggle:()=>{},getFeaturedImageUrl:i,handleImageError:o}))))))):(0,s.createElement)("div",{className:"w-full bg-[#E6E6E6] p-5 rounded-2xl"},(0,s.createElement)("p",{className:"text-gray-600"},m.noRelatedAuctions))},z=function(){const{id:e}=(0,l.g)(),{auctions:t,bidsList:a,updateAuction:n}=(0,y.d)(),[i,o]=(0,s.useState)(!0),[u,d]=(0,s.useState)(null),[M,N]=(0,s.useState)((()=>{const e=window.bidspaceSettings?.userId;return e?Number(e):null})),[g,p]=(0,s.useState)((()=>window.bidspaceSettings?.userName||""));j(e);const D=t[e],I=a[e]||[];return(0,s.useEffect)((()=>{console.log("Current user ID:",M),console.log("Current user name:",g),console.log("Nonce:",window.bidspaceSettings?.nonce),console.log("API Key:",window.wpApiSettings?.apiKey),console.log("Full auction data:",D),console.log("Auction ID:",e),fetch(`${window.location.origin}/wp-json/wp/v2/auction/${e}`,{headers:{"X-API-Key":window.wpApiSettings?.apiKey||""}}).then((e=>{if(!e.ok)throw new Error("API response was not ok");return e.json()})).then((e=>console.log("Auction API Data:",e))).catch((e=>{console.error("API Error:",e),d(e.message)}))}),[M,g,D,e]),(0,s.useEffect)((()=>{D&&o(!1)}),[D]),(0,s.useEffect)((()=>{const e=()=>{const e=window.bidspaceSettings?.userId;e&&N(Number(e))};e();const t=setInterval(e,2e3);return()=>clearInterval(t)}),[]),(0,s.useEffect)((()=>{if(D){if(!1!==D.meta?.visibility){if(D?.title?.rendered){const e=D.title.rendered.replace(/<[^>]*>/g,"");document.title=`${e}`}else document.title="აუქციონის დეტალები | აუქციონი";return()=>{document.title="აუქციონი"}}d("auction_not_visible")}}),[D]),i?(0,s.createElement)("div",{className:"w-full min-h-screen flex items-center justify-center bg-[#E6E6E6]"},(0,s.createElement)("div",{className:"text-center"},(0,s.createElement)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#00AEEF] mx-auto"}),(0,s.createElement)("p",{className:"mt-4 text-gray-600"},"იტვირთება..."))):u?(0,s.createElement)("div",{className:"w-full min-h-screen flex items-center justify-center bg-[#E6E6E6]"},(0,s.createElement)("div",{className:"text-center text-red-500"},(0,s.createElement)("p",null,"დაფიქსირდა შეცდომა: ",u),(0,s.createElement)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-[#00AEEF] text-white rounded-lg"},"სცადეთ თავიდან"))):D&&!1!==D.meta?.visibility?(0,s.createElement)("div",{className:"w-full bg-[#E6E6E6] px-4 sm:px-8 lg:px-16 py-5 sm:py-8 lg:py-10 flex flex-col gap-5 sm:gap-8 lg:gap-10"},(0,s.createElement)("div",{className:"w-full bg-white p-3 sm:p-4 lg:p-5 rounded-2xl flex flex-col lg:flex-row gap-4 lg:gap-5"},(0,s.createElement)("div",{className:"w-full lg:w-1/2 flex flex-col gap-4"},(0,s.createElement)(r,{mediaId:D.featured_media}),(0,s.createElement)("div",{className:"hidden lg:block bg-white rounded-lg p-3 sm:p-4 shadow"},(0,s.createElement)("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4"},"ბიდების ისტორია"),(0,s.createElement)(w,{bids:I}))),(0,s.createElement)("div",{className:"w-full lg:w-1/2 flex flex-col gap-3 sm:gap-4"},(0,s.createElement)("h1",{className:"text-xl sm:text-2xl font-bold"},D.title?.rendered||"უსათაურო აუქციონი"),(0,s.createElement)(c,{authorName:D.author_data?.display_name,city:D.meta?.city,startTime:D.meta?.start_time}),(0,s.createElement)(m,{auction:D}),(0,s.createElement)(x,{auction:{...D,buy_now_price:D.meta?.buy_now_price},startTime:D.meta?.start_time,dueTime:D.meta?.due_time,currentUserId:M,onBidPlaced:async t=>{try{const a=await fetch(`${window.location.origin}/wp-json/wp/v2/auction/${e}/bid`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bidspaceSettings.restNonce,"X-API-Key":window.wpApiSettings?.apiKey||""},body:JSON.stringify({bid_amount:t})});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to submit bid")}await a.json(),n({...D,current_bid:t})}catch(e){throw console.error("Bid submission error:",e),e}},onAuctionEnd:async()=>{try{(await fetch(`${window.location.origin}/wp-json/wp/v2/auction/${e}/notify-winner`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bidspaceSettings.restNonce,"X-API-Key":window.wpApiSettings?.apiKey||""}})).ok||console.error("Failed to send winner notification")}catch(e){console.error("Error sending winner notification:",e)}}}))),(0,s.createElement)("div",{className:"lg:hidden w-full bg-white rounded-2xl p-3 sm:p-4 shadow"},(0,s.createElement)("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4"},"ბიდების ისტორია"),(0,s.createElement)(w,{bids:I})),(0,s.createElement)(E,{comments:D.meta?.comments||{},currentUserName:g,onSubmitComment:async t=>{if(!window.bidspaceSettings?.userId)throw new Error("გთხოვთ გაიაროთ ავტორიზაცია");if(!window.bidspaceSettings?.restNonce)throw new Error("Authentication token is missing");try{const a=await fetch(`${window.location.origin}/wp-json/wp/v2/auction/${e}/comment`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bidspaceSettings.restNonce,"X-API-Key":window.wpApiSettings?.apiKey||""},credentials:"include",body:JSON.stringify({comment_area:t.trim()})});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to add comment")}const s=await a.json(),l={...D,meta:{...D.meta,comments:s.allComments}};return n(l),s}catch(e){throw console.error("Comment submission error:",e),e}}}),(0,s.createElement)(f,{currentAuctionId:e})):(0,s.createElement)("div",{className:"w-full min-h-screen flex items-centerjustify-center bg-[#E6E6E6]"},(0,s.createElement)("div",{className:"text-center text-gray-600"},(0,s.createElement)("p",null,"აუქციონი არ არის ხელმისაწვდომი"),(0,s.createElement)("button",{onClick:()=>window.location.href="/",className:"mt-4 px-4 py-2 bg-[#00AEEF] text-white rounded-lg hover:bg-[#009bd6] transition-colors"},"მთავარ გვერდზე დაბრუნება")))}}}]);