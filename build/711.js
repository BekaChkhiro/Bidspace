"use strict";(self.webpackChunkbrads_boilerplate_theme=self.webpackChunkbrads_boilerplate_theme||[]).push([[711],{6477:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(1609);const n=({onSortChange:e,sortBy:t})=>(0,r.createElement)("div",{className:"flex items-center space-x-4"},(0,r.createElement)("label",{className:"text-gray-600 text-sm"},"დალაგება:"),(0,r.createElement)("select",{value:t,onChange:t=>e(t.target.value),className:"border border-gray-300 rounded-md px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},(0,r.createElement)("option",{value:"date"},"თარიღის მიხედვით"),(0,r.createElement)("option",{value:"likes"},"მოწონებების მიხედვით"),(0,r.createElement)("option",{value:"views"},"ნახვების მიხედვით"),(0,r.createElement)("option",{value:"comments"},"კომენტარების მიხედვით")))},2018:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(1609),n=a(4976),s=a(4740),l=a(2768),o=a(6477);const c=({category:e,title:t})=>{const[a,c]=(0,r.useState)([]),[m,i]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[p,g]=(0,r.useState)("date"),[h,f]=(0,r.useState)(1),[b,x]=(0,r.useState)(1),{user:v}=(0,s.A)();return(0,r.useEffect)((()=>{(async()=>{try{const t=e?`/wp-json/wp/v2/forum?forum_category=${e}&_embed&orderby=${p}&page=${h}&per_page=10`:`/wp-json/wp/v2/forum?_embed&orderby=${p}&page=${h}&per_page=10`,a=await fetch(t);if(!a.ok)throw new Error("Failed to fetch posts");const r=await a.json(),n=a.headers.get("X-WP-TotalPages");x(parseInt(n)||1);let s=[...r];switch(p){case"likes":s.sort(((e,t)=>(t.meta?.like_count||0)-(e.meta?.like_count||0)));break;case"views":s.sort(((e,t)=>(t.meta?.views_count||0)-(e.meta?.views_count||0)));break;case"comments":s.sort(((e,t)=>(t.comment_count||0)-(e.comment_count||0)));break;default:s.sort(((e,t)=>new Date(t.date)-new Date(e.date)))}c(s)}catch(e){u(e.message)}finally{i(!1)}})()}),[e,p,h]),m?(0,r.createElement)("div",{className:"flex justify-center items-center min-h-[200px]"},(0,r.createElement)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})):d?(0,r.createElement)("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-lg p-4"},"Error: ",d):(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6"},(0,r.createElement)("div",{className:"flex items-center justify-between"},(0,r.createElement)("h2",{className:"text-2xl font-bold"},t),(0,r.createElement)(o.A,{onSortChange:e=>{g(e),f(1)},sortBy:p}))),(0,r.createElement)("div",{className:"grid gap-4"},0===a.length?(0,r.createElement)("div",{className:"text-center bg-gray-50 rounded-lg py-12"},(0,r.createElement)("p",{className:"text-gray-500 text-lg"},"ამ კატეგორიაში კითხვები არ არის"),(0,r.createElement)(n.N_,{to:"/forum/add-question",className:"inline-block mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},"+ დაამატე პირველი კითხვა")):(0,r.createElement)(r.Fragment,null,a.map((e=>(0,r.createElement)("div",{key:e.id,className:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200"},(0,r.createElement)(n.N_,{to:`/forum/post/${e.id}`,className:"block"},e.featured_image_url&&(0,r.createElement)("div",{className:"relative h-48 overflow-hidden"},(0,r.createElement)("img",{src:e.featured_image_url,alt:e.title.rendered,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}}))),(0,r.createElement)("div",{className:"p-6"},(0,r.createElement)("div",{className:"flex items-start justify-between mb-4"},(0,r.createElement)("div",{className:"flex items-center space-x-3"},e._embedded?.author?.[0]?.avatar_urls?.[48]&&(0,r.createElement)("img",{src:e._embedded.author[0].avatar_urls[48],alt:e._embedded.author[0].name,className:"w-10 h-10 rounded-full border-2 border-gray-100"}),(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"font-medium text-gray-900"},e._embedded?.author?.[0]?.name),(0,r.createElement)("div",{className:"text-sm text-gray-500"},(e=>{const t=new Date(e),a=new Date,r=Math.floor((a-t)/1e3),n=Math.floor(r/60),s=Math.floor(n/60),l=Math.floor(s/24),o=Math.floor(l/30),c=Math.floor(l/365);return r<60?"წამის წინ":n<60?`${n} წუთის წინ`:s<24?`${s} საათის წინ`:l<30?`${l} დღის წინ`:o<12?`${o} თვის წინ`:`${c} წლის წინ`})(e.date)))),(0,r.createElement)(l.A,{postId:e.id,initialLikeCount:e.meta?.like_count||0,initialLiked:e.meta?.user_has_liked||!1})),(0,r.createElement)(n.N_,{to:`/forum/post/${e.id}`,className:"block group"},(0,r.createElement)("h2",{className:"text-xl font-semibold mb-2 text-gray-900 group-hover:text-[#00aff0] transition-colors"},e.title.rendered),(0,r.createElement)("div",{className:"prose prose-sm max-w-none text-gray-600 line-clamp-2 mb-4",dangerouslySetInnerHTML:{__html:e.excerpt.rendered}})),(0,r.createElement)("div",{className:"flex items-center justify-between"},e._embedded&&e._embedded["wp:term"]&&(0,r.createElement)("div",{className:"flex flex-wrap gap-2"},e._embedded["wp:term"][0].map((e=>{return(0,r.createElement)("span",{key:e.id,className:"inline-block bg-gray-100 text-gray-600 text-sm px-3 py-1 rounded-full"},{"cinema-theatre":"კინო-თეატრი",events:"ივენთები",sports:"სპორტი",travel:"მოგზაურობა"}[t=e.slug]||t);var t}))),(0,r.createElement)("div",{className:"flex items-center space-x-4"},(0,r.createElement)("span",{className:"flex items-center text-gray-500 text-sm"},(0,r.createElement)("svg",{className:"w-5 h-5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),e.comment_count||0),(0,r.createElement)("span",{className:"flex items-center text-gray-500 text-sm"},(0,r.createElement)("svg",{className:"w-5 h-5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),e.meta?.views_count||0))))))),(0,r.createElement)("div",{className:"flex justify-center items-center space-x-2 mt-6"},(0,r.createElement)("button",{onClick:()=>f((e=>Math.max(1,e-1))),disabled:1===h,className:"px-3 py-1 rounded "+(1===h?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-[#00aff0] text-white")},"წინა"),Array.from({length:Math.min(5,b)},((e,t)=>{let a;return a=b<=5||h<=3?t+1:h>=b-2?b-4+t:h-2+t,(0,r.createElement)("button",{key:a,onClick:()=>f(a),className:"px-3 py-1 rounded "+(h===a?"bg-[#00aff0] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200")},a)})),(0,r.createElement)("button",{onClick:()=>f((e=>Math.min(b,e+1))),disabled:h===b,className:"px-3 py-1 rounded "+(h===b?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-[#00aff0] text-white")},"შემდეგი")))))}},2768:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(1609),n=a(4740);const s=({postId:e,initialLikeCount:t=0,initialLiked:a=!1})=>{const[s,l]=(0,r.useState)(t),[o,c]=(0,r.useState)(a),[m,i]=(0,r.useState)(!1),{user:d}=(0,n.A)();return(0,r.createElement)("button",{onClick:async()=>{if(d&&!m){i(!0);try{const t=await fetch(`/wp-json/bidspace/v1/forum/${e}/like`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce}});if(!t.ok)throw new Error("Failed to toggle like");const a=await t.json();l(a.like_count),c(a.user_has_liked)}catch(e){console.error("Error toggling like:",e)}finally{i(!1)}}},disabled:!d||m,className:"flex items-center gap-2 hover:opacity-80 transition-opacity "+(d?"":"cursor-not-allowed opacity-50")},(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 "+(o?"text-red-500":"text-gray-400"),viewBox:"0 0 24 24",fill:o?"currentColor":"none",stroke:"currentColor",strokeWidth:"2"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})),(0,r.createElement)("span",{className:"text-sm "+(o?"text-red-500":"text-gray-500")},s))}},711:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var r=a(1609),n=a(2018);const s=()=>(0,r.createElement)("div",null,(0,r.createElement)(n.A,{category:"events",title:"ივენთები"}))}}]);