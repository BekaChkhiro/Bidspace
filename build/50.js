"use strict";(self.webpackChunkbrads_boilerplate_theme=self.webpackChunkbrads_boilerplate_theme||[]).push([[50],{7891:(e,a,t)=>{t.d(a,{j:()=>s});var r=t(223),c=t(3075),l=t(4057);const n=(0,r.Wp)({apiKey:"AIzaSyCOp6Z8ws4e6XSk1CTyVPqdDkAoe7Slldc",authDomain:"bidspace-86337.firebaseapp.com",projectId:"bidspace-86337",storageBucket:"bidspace-86337.firebasestorage.app",messagingSenderId:"242580753474",appId:"1:242580753474:web:d158b2b472c5cd74b931db",measurementId:"G-G2TT39HFNP"}),s=((0,c.P5)(n),(0,l.xI)(n));s.languageCode="ka",s.settings.appVerificationDisabledForTesting=!1},9050:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var r=t(1609),c=t(7891),l=t(4057);const n=()=>{const[e,a]=(0,r.useState)(""),[t,n]=(0,r.useState)(""),[s,o]=(0,r.useState)(null),[i,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[b,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(console.log("Auth object:",c.j),c.j)return m("Auth წარმატებით ინიციალიზდა"),()=>{window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null)};m("Auth არ არის ინიციალიზებული!")}),[]);const w=(e,a)=>{console.error(`${e}:`,a);const t=a.message||"უცნობი შეცდომა";let r="დაფიქსირდა შეცდომა";"auth/invalid-phone-number"===a.code?r="არასწორი ტელეფონის ნომერი":"auth/too-many-requests"===a.code?r="ძალიან ბევრი მცდელობა. გთხოვთ სცადოთ მოგვიანებით":"auth/quota-exceeded"===a.code?r="დღიური ლიმიტი ამოწურულია. სცადეთ ხვალ":"auth/error-code:-39"===a.code&&(r="ტექნიკური ხარვეზი. გთხოვთ სცადოთ მოგვიანებით"),d(`შეცდომა: ${r}`),m((a=>a+`\n${e}: ${t}`)),window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null)};return(0,r.createElement)("div",{className:"max-w-2xl mx-auto p-5"},(0,r.createElement)("h2",{className:"text-2xl font-bold mb-6"},"SMS ვერიფიკაცია"),(0,r.createElement)("form",{onSubmit:async a=>{if(a.preventDefault(),p(!0),m((e=>e+"\nSMS გაგზავნის პროცესი დაიწყო")),m((a=>a+"\nმოწმდება ნომერი: "+e)),!(e=>{const a=e.replace(/\D/g,""),t=a.startsWith("995")?a.slice(3):a;return/^5\d{8}$/.test(t)})(e)){const e="გთხოვთ შეიყვანოთ ვალიდური ქართული მობილურის ნომერი (მაგ: 555123456)";return d(e),m((a=>a+"\nვალიდაცია ვერ გაიარა: "+e)),void p(!1)}try{window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null),window.recaptchaVerifier=new l.kT(c.j,"send-code-button",{size:"invisible",callback:async a=>{m((e=>e+"\nRecaptcha წარმატებით გაიარა: "+a)),await(async()=>{try{const a=e.startsWith("995")?`+${e}`:`+995${e}`;m((e=>e+"\nფორმატირებული ნომერი: "+a));const t=await(0,l.ik)(c.j,a,window.recaptchaVerifier);o(t),d("ვერიფიკაციის კოდი გამოგზავნილია!"),m((e=>e+"\nSMS წარმატებით გაიგზავნა"))}catch(e){console.error("Full error object:",e),m((a=>a+"\nError code: "+(e.code||"unknown"))),m((a=>a+"\nError message: "+e.message)),m((a=>a+"\nError details: "+JSON.stringify(e))),e.customData&&m((a=>a+"\nCustom data: "+JSON.stringify(e.customData))),w("SMS გაგზავნის შეცდომა",e)}finally{p(!1)}})()},"expired-callback":()=>{d("Recaptcha-ს ვადა გავიდა. სცადეთ თავიდან."),m((e=>e+"\nRecaptcha-ს ვადა გავიდა")),window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null),p(!1)}}),await window.recaptchaVerifier.verify()}catch(e){w("Recaptcha შეცდომა",e),p(!1)}},className:"mb-6"},(0,r.createElement)("div",{className:"mb-4"},(0,r.createElement)("label",{className:"block mb-2"},"ტელეფონის ნომერი"),(0,r.createElement)("div",{className:"relative"},(0,r.createElement)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-600"},"+995"),(0,r.createElement)("input",{type:"tel",value:e,onChange:e=>{const t=(e=>{let a=e.replace(/\D/g,"");return a.startsWith("995")&&(a=a.slice(3)),a=a.slice(0,9),a})(e.target.value);a(t),d("")},placeholder:"555123456",className:"w-full px-16 py-2 border rounded text-lg",disabled:b})),(0,r.createElement)("small",{className:"text-gray-600 mt-1 block"},"შეიყვანეთ 9-ნიშნა მობილურის ნომერი (მაგ: 555123456)")),(0,r.createElement)("button",{id:"send-code-button",type:"submit",disabled:b,className:"w-full py-2 px-4 rounded text-lg text-white "+(b?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600")},b?"იგზავნება...":"კოდის გაგზავნა")),(0,r.createElement)("form",{onSubmit:async e=>{if(e.preventDefault(),s){p(!0);try{m((e=>e+"\nკოდის ვერიფიკაცია დაიწყო"));const e=await s.confirm(t);d("ნომერი წარმატებით დადასტურდა!"),m((e=>e+"\nკოდი წარმატებით დადასტურდა")),console.log("ვერიფიკაციის შედეგი:",e)}catch(e){w("კოდის ვერიფიკაციის შეცდომა",e)}finally{p(!1)}}else d("ჯერ გააგზავნეთ SMS")},className:"mb-6"},(0,r.createElement)("div",{className:"mb-4"},(0,r.createElement)("label",{className:"block mb-2"},"ვერიფიკაციის კოდი"),(0,r.createElement)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"შეიყვანეთ 6-ნიშნა კოდი",className:"w-full px-4 py-2 border rounded text-lg",disabled:b})),(0,r.createElement)("button",{type:"submit",disabled:!s||b,className:"w-full py-2 px-4 rounded text-lg text-white "+(!s||b?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600")},b?"მოწმდება...":"კოდის შემოწმება")),i&&(0,r.createElement)("div",{className:"p-4 rounded mb-4 "+(i.includes("შეცდომა")||i.includes("არასწორი")?"bg-red-100 border border-red-200":"bg-green-100 border border-green-200")},i),(0,r.createElement)("div",{className:"bg-gray-100 p-4 rounded"},(0,r.createElement)("h3",{className:"font-bold mb-2"},"დებაგ ინფორმაცია:"),(0,r.createElement)("pre",{className:"whitespace-pre-wrap break-words text-sm"},u)))}}}]);