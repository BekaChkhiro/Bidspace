"use strict";(self.webpackChunkbrads_boilerplate_theme=self.webpackChunkbrads_boilerplate_theme||[]).push([[293],{2293:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(1609),r=a(4740),l=a(4860),i=a(8924),s=a(438),m=a(4674);const o=()=>{const{user:e}=(0,r.A)(),[t,a]=(0,n.useState)({first_name:"",last_name:"",email:"",phone_number:"",nickname:"",piradi_nomeri:""}),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[g,p]=(0,n.useState)(!1),[b,f]=(0,n.useState)(null);(0,n.useEffect)((()=>{e&&y()}),[e]);const y=async()=>{try{const e=await fetch("/wp-json/wp/v2/users/me",{credentials:"include",headers:{"X-WP-Nonce":wpApiSettings.nonce}}),t=await e.json();a({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone_number:t.meta?.phone_number||"",nickname:t.nickname||"",piradi_nomeri:t.meta?.piradi_nomeri||""})}catch(e){console.error("Error fetching user data:",e)}},h=(e,t="success")=>{f({message:e,type:t}),setTimeout((()=>f(null)),3e3)},E=e=>{const{name:t,value:n}=e.target;a((e=>({...e,[t]:n})))};return(0,n.createElement)("div",{className:"w-full px-4 py-8"},(0,n.createElement)("div",{className:"flex flex-col gap-6 max-w-4xl mx-auto"},b&&(0,n.createElement)("div",{className:"fixed bottom-4 right-4 z-50"},(0,n.createElement)(l.A,{message:b.message,type:b.type,onClose:()=>f(null)})),(0,n.createElement)("h2",{className:"text-xl md:text-2xl font-bold"},"პირადი მონაცემების რედაქტირება"),(0,n.createElement)("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{if(!(await fetch("/wp-json/wp/v2/users/me",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({first_name:t.first_name,last_name:t.last_name,email:t.email,nickname:t.nickname,meta:{phone_number:t.phone_number,piradi_nomeri:t.piradi_nomeri}})})).ok)throw new Error("Update failed");h("პროფილი წარმატებით განახლდა")}catch(e){console.error("Error updating profile:",e),h("პროფილის განახლება ვერ მოხერხდა","error")}c(!1)},className:"space-y-4 md:space-y-6"},(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,n.createElement)("div",null,(0,n.createElement)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700"},"სახელი"),(0,n.createElement)("input",{type:"text",id:"first_name",name:"first_name",value:t.first_name,onChange:E,required:!0,className:"settings-field-style mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})),(0,n.createElement)("div",null,(0,n.createElement)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700"},"გვარი"),(0,n.createElement)("input",{type:"text",id:"last_name",name:"last_name",value:t.last_name,onChange:E,required:!0,className:"settings-field-style mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}))),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,n.createElement)("div",null,(0,n.createElement)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700"},"ელ-ფოსტა"),(0,n.createElement)("div",{className:"mt-1 relative"},(0,n.createElement)("input",{type:"email",id:"email",name:"email",value:t.email,disabled:!0,className:"settings-field-style block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 pr-20"}),(0,n.createElement)("button",{type:"button",onClick:()=>p(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 text-sm text-white bg-black rounded-full hover:bg-gray-800 transition-colors"},"შეცვლა"))),(0,n.createElement)("div",null,(0,n.createElement)("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700"},"ტელეფონის ნომერი"),(0,n.createElement)("div",{className:"mt-1 relative"},(0,n.createElement)("input",{type:"text",id:"phone_number",name:"phone_number",value:t.phone_number,disabled:!0,className:"settings-field-style block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 pr-20"}),(0,n.createElement)("button",{type:"button",onClick:()=>u(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 text-sm text-white bg-black rounded-full hover:bg-gray-800 transition-colors"},"შეცვლა")))),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,n.createElement)("div",null,(0,n.createElement)("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700"},"მომხმარებლის სახელი"),(0,n.createElement)("input",{type:"text",id:"nickname",name:"nickname",value:t.nickname,onChange:E,required:!0,className:"settings-field-style mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})),(0,n.createElement)("div",null,(0,n.createElement)("label",{htmlFor:"piradi_nomeri",className:"block text-sm font-medium text-gray-700"},"პირადი ნომერი"),(0,n.createElement)("input",{type:"text",id:"piradi_nomeri",name:"piradi_nomeri",value:t.piradi_nomeri,onChange:E,className:"settings-field-style mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}))),(0,n.createElement)("div",{className:"flex"},(0,n.createElement)("button",{type:"submit",className:"w-full md:w-auto px-6 py-3 bg-black text-white rounded-md hover:bg-gray-800",disabled:o},"შენახვა"))),(0,n.createElement)("div",{className:"border-t pt-6"},(0,n.createElement)(i.A,null)),(0,n.createElement)(s.A,{isOpen:d,onClose:()=>u(!1),currentPhone:t.phone_number,onPhoneChange:e=>{a((t=>({...t,phone_number:e}))),h("ტელეფონის ნომერი წარმატებით შეიცვალა")}}),(0,n.createElement)(m.A,{isOpen:g,onClose:()=>p(!1),currentEmail:t.email,onEmailChange:e=>{a((t=>({...t,email:e}))),h("ელ-ფოსტა წარმატებით შეიცვალა")}})))}}}]);