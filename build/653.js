"use strict";(self.webpackChunkbrads_boilerplate_theme=self.webpackChunkbrads_boilerplate_theme||[]).push([[653],{1019:(e,t,a)=>{a.d(t,{A:()=>N});var l=a(1609),n=a(4976),s=a(7767),r=(a(2389),a(4740)),c=a(6449),o=a(3063),m=a(8401),i=a(8196),d=a(6480),E=a(4310),u=a(7276),f=a(30),h=a(2687);const b=({isMobile:e,onClose:t})=>{const a=(0,s.zy)(),{logout:b}=(0,r.A)(),g=e=>a.pathname===e?"dashboard-menu-item-active w-full flex gap-2 items-center px-6 py-3 border-l-4 border-[#3B82F6] bg-[#F0F7FF]":"dashboard-menu-item w-full flex gap-2 items-center px-6 py-3 hover:border-l-4 hover:border-[#3B82F6] hover:bg-[#F0F7FF]";return(0,l.createElement)("div",{className:"h-full bg-white flex flex-col justify-between border-r border-[#E5E5E5] pb-6"},(0,l.createElement)("div",{className:"flex flex-col gap-11"},e&&(0,l.createElement)("div",{className:"flex justify-between items-center p-4 border-b border-[#E5E5E5]"},(0,l.createElement)(n.N_,{to:"/"},(0,l.createElement)("img",{src:h,alt:"Logo Icon",className:"w-28"})),(0,l.createElement)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full"},(0,l.createElement)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),(0,l.createElement)("div",{className:"hidden md:block w-full h-24 p-6",style:{height:"10%"}},(0,l.createElement)(n.N_,{to:"/"},(0,l.createElement)("img",{src:h,alt:"Logo Icon",className:"w-28"}))),(0,l.createElement)("div",{className:"w-full flex flex-col gap-4"},(0,l.createElement)("nav",{className:"w-full flex flex-col gap-2"},(0,l.createElement)(n.N_,{to:"/dashboard",className:g("/dashboard")},(0,l.createElement)("img",{src:c.A,alt:"Profile Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#6F7181]"},"პროფილი")),(0,l.createElement)(n.N_,{to:"/dashboard/add-auction",className:g("/dashboard/add-auction")},(0,l.createElement)("img",{src:o.A,alt:"Add Auction Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#6F7181]"},"აუქციონის დამატება")),(0,l.createElement)(n.N_,{to:"/dashboard/my-auctions",className:g("/dashboard/my-auctions")},(0,l.createElement)("img",{src:m.A,alt:"My Auctions Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#6F7181]"},"ჩემი აუქციონები")),(0,l.createElement)(n.N_,{to:"/dashboard/won-auctions",className:g("/dashboard/won-auctions")},(0,l.createElement)("img",{src:i.A,alt:"Won Auctions Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#6F7181]"},"მოგებული აუქციონები")),(0,l.createElement)(n.N_,{to:"/dashboard/wishlist",className:g("/dashboard/wishlist")},(0,l.createElement)("img",{src:d.A,alt:"Wishlist Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#6F7181]"},"სურვილების სია"))),(0,l.createElement)("hr",{className:"border-[#E5E5E5]"}),(0,l.createElement)("nav",{className:"w-full flex flex-col gap-2"},(0,l.createElement)(n.N_,{to:"/dashboard/archive",className:g("/dashboard/archive")},(0,l.createElement)("img",{src:E.A,alt:"Archive Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#6F7181]"},"არქივი")),(0,l.createElement)(n.N_,{to:"/dashboard/settings",className:g("/dashboard/settings")},(0,l.createElement)("img",{src:u.A,alt:"Settings Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#6F7181]"},"პარამეტრები"))))),(0,l.createElement)("div",{className:"flex justify-center items-center"},(0,l.createElement)("button",{onClick:async()=>{try{await b(),a.pathname="/"}catch(e){console.error("Error logging out:",e)}},className:"flex gap-2 items-center px-6 py-3 hover:bg-[#F0F7FF] w-full"},(0,l.createElement)("img",{src:f.A,alt:"Logout Icon"}),(0,l.createElement)("span",{className:"font-normal text-base text-[#FB6B63]"},"გასვლა"))))};var g=a(3486),p=a(6506);const N=({children:e})=>{const[t,a]=(0,l.useState)(!1);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"md:hidden w-full p-4 border-b border-[#E5E5E5] bg-white flex justify-between items-center fixed top-0 left-0 z-40"},(0,l.createElement)("button",{onClick:()=>a(!t),className:"p-2"},(0,l.createElement)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,l.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"}))),(0,l.createElement)(n.N_,{to:"/"},(0,l.createElement)("img",{src:h,alt:"Bidspace Logo",className:"w-24"})),(0,l.createElement)(p.A,null)),(0,l.createElement)("div",{className:`md:hidden fixed inset-0 z-50 transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`},(0,l.createElement)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>a(!1)}),(0,l.createElement)("div",{className:"relative w-[280px] h-full bg-white"},(0,l.createElement)(b,{isMobile:!0,onClose:()=>a(!1)}))),(0,l.createElement)("div",{className:"w-full h-[100vh] hidden md:flex justify-center bg-[#F9F9F9]"},(0,l.createElement)("div",{className:"w-1/6 h-full"},(0,l.createElement)(b,null)),(0,l.createElement)("div",{className:"w-5/6 h-full"},(0,l.createElement)("div",{className:"w-full p-6 border-b border-[#E5E5E5] flex justify-end items-center gap-6",style:{height:"10%"}},(0,l.createElement)(g.A,null),(0,l.createElement)(p.A,null)),(0,l.createElement)("div",{className:"p-6 h-[90%] overflow-y-auto"},e))),(0,l.createElement)("div",{className:"md:hidden w-full min-h-screen bg-[#F9F9F9] pt-[60px]"},(0,l.createElement)("div",{className:"p-4"},e)))}},8653:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var l=a(1609),n=a(9939),s=a(4740),r=a(1019),c=a(4976),o=a(8027);const m=()=>{const[e,t]=(0,l.useState)([]),[a,m]=(0,l.useState)(!0),{user:i}=(0,s.A)();(0,l.useEffect)((()=>{i&&(async()=>{if(i)try{console.log("Fetching auctions for user:",i);const e=await fetch("/wp-json/wp/v2/auction?per_page=100&_embed",{headers:{Accept:"application/json","Content-Type":"application/json","X-API-Key":window.wpApiSettings?.apiKey||""},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch auctions");const a=await e.json();console.log("All auctions:",a);const l=a.filter((e=>{const t=e.meta?.last_bid_author_id,a=i.id;return t&&(t===a.toString()||parseInt(t)===a)}));console.log("Won auctions:",l),t(l)}catch(e){console.error("Error fetching won auctions:",e)}finally{m(!1)}else console.log("No user found:",i)})()}),[i]);const d=a?(0,l.createElement)(n.A,null):(0,l.createElement)(l.Fragment,null,0===e.length?(0,l.createElement)("p",{className:"text-gray-600"},"თქვენ ჯერ არ გაქვთ მოგებული აუქციონები"):(0,l.createElement)("div",{className:"grid grid-cols-1 gap-4"},e.map((e=>(0,l.createElement)(c.N_,{to:`/auction/${e.id}`,key:e.id,className:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow duration-200 flex items-center justify-between"},(0,l.createElement)("div",{className:"flex flex-col gap-1"},(0,l.createElement)("h2",{className:"text-lg font-bold",dangerouslySetInnerHTML:{__html:e.title.rendered}}),(0,l.createElement)("div",{className:"flex items-center gap-2 text-gray-600"},(0,l.createElement)(o.bfZ,{className:"text-sm"}),(0,l.createElement)("span",{className:"text-sm"},(e=>{try{return new Date(e).toLocaleDateString("ka-GE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return"Invalid Date"}})(e.meta?.event_date||e.date))),(0,l.createElement)("div",{className:"flex items-center gap-2 text-gray-600"},(0,l.createElement)(o.vq8,{className:"text-sm"}),(0,l.createElement)("span",{className:"text-sm"},e.meta?.location||"ბათუმი"))),(0,l.createElement)("div",{className:"text-right flex flex-col gap-2"},(0,l.createElement)("div",null,(0,l.createElement)("div",{className:"text-sm text-gray-500"},"ბიდის ფასი:"),(0,l.createElement)("div",{className:"font-bold text-lg"},e.meta?.last_bid_price||e.meta?.auction_price||0,"₾")),(0,l.createElement)("div",{className:"text-[#06afef]"},"გადახდა")))))));return(0,l.createElement)(r.A,null,(0,l.createElement)("h1",{className:"text-2xl font-bold mb-6"},"მოგებული აუქციონები"),d)}}}]);