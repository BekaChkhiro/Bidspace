"use strict";(self.webpackChunkbrads_boilerplate_theme=self.webpackChunkbrads_boilerplate_theme||[]).push([[794],{5794:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var l=a(1609),r=a(7767),s=a(4740);const n=()=>{const[e,t]=(0,l.useState)(""),[a,n]=(0,l.useState)(""),[o,c]=(0,l.useState)("cinema"),[d,m]=(0,l.useState)(!1),[i,u]=(0,l.useState)(null),{user:f}=(0,s.A)(),g=(0,r.Zp)(),[p,b]=(0,l.useState)(null),[h,x]=(0,l.useState)(null),y=[{id:"cinema",name:"კინო-თეატრი",slug:"cinema"},{id:"events",name:"ივენთები",slug:"events"},{id:"sports",name:"სპორტი",slug:"sports"},{id:"travel",name:"მოგზაურობა",slug:"travel"}];return f?(0,l.createElement)("div",{className:"w-full"},(0,l.createElement)("div",{className:"bg-white rounded-2xl shadow-lg p-4 md:p-8"},(0,l.createElement)("h2",{className:"text-2xl md:text-3xl font-bold mb-8"},"დაამატე კითხვა"),i&&(0,l.createElement)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4"},i),(0,l.createElement)("form",{onSubmit:async t=>{t.preventDefault(),m(!0),u(null);try{const t=y.find((e=>e.id===o)),l=new FormData;l.append("title",e),l.append("content",a),l.append("status","publish"),l.append("forum_category[]",t.slug),p&&l.append("featured_image",p);const r=await fetch("/wp-json/wp/v2/forum",{method:"POST",headers:{"X-WP-Nonce":wpApiSettings.nonce},body:l});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to create forum post")}g(`/forum/${t.slug}`)}catch(e){u(e.message)}finally{m(!1)}},className:"space-y-8"},(0,l.createElement)("div",null,(0,l.createElement)("label",{className:"block text-base font-semibold text-gray-900 mb-4"},"კატეგორია"),(0,l.createElement)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},y.map((e=>(0,l.createElement)("div",{key:e.id,className:"relative rounded-xl border-2 p-4 cursor-pointer transition-all "+(o===e.id?"border-[#00aff0]":"border-gray-200 hover:border-gray-300"),onClick:()=>c(e.id)},(0,l.createElement)("input",{type:"radio",id:`category-${e.id}`,name:"category",value:e.id,checked:o===e.id,onChange:e=>c(e.target.value),className:"sr-only"}),(0,l.createElement)("label",{htmlFor:`category-${e.id}`,className:"flex items-center cursor-pointer"},(0,l.createElement)("div",{className:"w-4 h-4 rounded-full border-2 mr-3 flex items-center justify-center "+(o===e.id?"border-[#00aff0]":"border-gray-400")},o===e.id&&(0,l.createElement)("div",{className:"w-2 h-2 rounded-full bg-[#00aff0]"})),(0,l.createElement)("span",{className:"text-base"},e.name))))))),(0,l.createElement)("div",{className:"grid grid-cols-1 gap-8"},(0,l.createElement)("div",{className:"space-y-2"},(0,l.createElement)("label",{htmlFor:"title",className:"block text-base font-semibold text-gray-900"},"სათაური"),(0,l.createElement)("input",{type:"text",id:"title",value:e,onChange:e=>t(e.target.value),className:"w-full px-5 py-4 text-base border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#00aff0] focus:border-transparent bg-gray-50 shadow-sm",placeholder:"შეიყვანეთ კითხვის სათაური",required:!0}))),(0,l.createElement)("div",{className:"space-y-2"},(0,l.createElement)("label",{htmlFor:"content",className:"block text-base font-semibold text-gray-900"},"კითხვის შინაარსი"),(0,l.createElement)("textarea",{id:"content",value:a,onChange:e=>n(e.target.value),rows:"6",className:"w-full px-5 py-4 text-base border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#00aff0] focus:border-transparent bg-gray-50 shadow-sm",placeholder:"დაწერეთ თქვენი კითხვა...",required:!0})),(0,l.createElement)("div",{className:"space-y-2"},(0,l.createElement)("label",{className:"block text-base font-semibold text-gray-900"},"სურათი (არასავალდებულო)"),(0,l.createElement)("div",{className:"mt-2"},(0,l.createElement)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(b(t),x(URL.createObjectURL(t)))},className:"hidden",id:"forum-image"}),(0,l.createElement)("label",{htmlFor:"forum-image",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#00aff0]"},"აირჩიეთ სურათი"),h&&(0,l.createElement)("div",{className:"mt-4 relative"},(0,l.createElement)("img",{src:h,alt:"Preview",className:"max-w-xs rounded-lg shadow-sm"}),(0,l.createElement)("button",{type:"button",onClick:()=>{b(null),x(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 focus:outline-none"},(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},(0,l.createElement)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})))))),(0,l.createElement)("div",{className:"flex justify-end pt-4"},(0,l.createElement)("button",{type:"submit",disabled:d,className:"bg-[#00aff0] text-white py-4 px-10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#FF3D00] focus:ring-offset-2 transition-colors text-base font-medium shadow-md "+(d?"opacity-50 cursor-not-allowed":"")},d?"იტვირთება...":"კითხვის დამატება"))))):(0,l.createElement)("div",{className:"p-4"},(0,l.createElement)("p",null,"გთხოვთ გაიაროთ ავტორიზაცია კითხვის დასამატებლად"))}}}]);